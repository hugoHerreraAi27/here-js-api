/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.57.0/HERE_NOTICE
 */

H.util.eval(
  'R.prototype.Yn=da(3,function(a){var b=this.getCache(),c=this;if(a!==z){C(a,Ri,R.prototype.Yn,0);var d=a}else d=$i;d!==b&&b.ia(function(e,f,g){return c.cc(e)?(d.add(e,f,g),!0):!1});this.jt=d});Bf.prototype.Yb=da(0,function(a){this.ts=a;a=this.getState();a!==df.INIT&&a!==df.LOADING&&If(this)});function io(a){a=a.Ud("_#-;,:","_#-;,:","_#-;,:");return new RegExp("^"+a.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,"\\\\$&").replace(/_#-;,:/g,"\\\\d+")+"$")}function jo(a,b){Pa.apply(null,arguments);return a}\nfunction ko(a,b){var c=x.console;c&&c.warn&&(a=cb(a)+" is deprecated and will be removed soon. ",b&&(a+=b),c.warn(a))}var lo={},mo=globalThis;function no(){}no.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||document.createElement("canvas")};no.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var oo=new no;t("H.service.util.eval",function(a){return eval(a)});function po(a,b){b=void 0===b?{}:b;if(!a.Hm)throw new wb(a);po.g.constructor.call(this);var c=qo(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,\'either "baseUrl" or "platformBaseUrl" must be specified\');this.wc=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.wc.Qk(a.host);a.subDomain&&this.wc.Ha(a.subDomain);a.path&&this.wc.Fg(a.path);ro(this.wc);this.Mc=c.headers||{}}u(po,K);t("H.service.Service",po);function qo(a,b){a=a.Ca();return b?jo({},a,b):a}\npo.prototype.Ca=function(){return{}};po.prototype.i=function(){return this.wc};po.prototype.getUrl=po.prototype.i;po.prototype.s=function(a,b,c,d){d=new Ue(void 0===d?"application/json":d,a.toString(),ge,{headers:this.Mc});d.then(b,so(this,a,c));return d};function so(a,b,c){return function(d){return"function"!==typeof d.json?Promise.reject(c(to(b,d))):d.json().then(function(e){return c(a.qd(e))},function(){return c(to(b,d))})}}po.prototype.qd=function(a){return Error(a.message)};\nfunction to(a,b){return Error((b.statusText?"["+b.statusText+"] ":"")+a+" request failed")};function uo(a,b){C(a,vo,uo,0);var c={};Object.assign(c,b);c.min=c.min||0;c.max=c.max||20;c.tileSize=c.tileSize||512;c.getURL=function(d,e,f){return a.Rf(d,e,f).clone().B({size:c.tileSize})};kj.call(this,c);this.$=a}u(uo,kj);t("H.service.rasterTile.Provider",uo);uo.prototype.U=function(a,b){var c=this.$;return c.U().query(c.Ci.Rn+"."+c.J(),b,a)};uo.prototype.getCopyrights=uo.prototype.U;uo.prototype.Vi=function(){return Mm()};uo.prototype.sd=function(){return Mm()?Lm():uo.g.sd.call(this)};function V(a,b,c,d,e,f){if(a&&b)this.$r(a),this.Qk(b),this.Fg(c),this.Wr(e),this.Nw(f),this.Tk(d);else throw new D(V,B,\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",V);\nfunction wo(a,b){var c=x.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=V;h=h&&0<h.length?h.substr(1):\n"";e={};var k,l;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;l=k.exec(c);)e[decodeURIComponent(l[2])]=l[4]?decodeURIComponent(l[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}V.parse=wo;V.prototype.clone=function(){var a={},b;for(b in this.Fa)a[b]=this.Fa[b];return new V(this.oi,this.Qj,this.hf,a,this.uk,this.Db)};V.prototype.clone=V.prototype.clone;\nV.prototype.$r=function(a){if(!a||"string"!==typeof a)throw new D(this.$r,0,\'The "scheme" parameter must be a non-empty string.\');this.oi=a;return this};V.prototype.setScheme=V.prototype.$r;V.prototype.AA=function(){return this.oi};V.prototype.getScheme=V.prototype.AA;V.prototype.Qk=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new D(this.Qk,0,\'The "host" parameter is not a valid host name.\');this.Qj=a;return this};\nV.prototype.setHost=V.prototype.Qk;V.prototype.Tz=function(){return this.Qj};V.prototype.getHost=V.prototype.Tz;V.prototype.Fg=function(a){this.hf=a||void 0;return this};V.prototype.setPath=V.prototype.Fg;V.prototype.mA=function(){return this.hf};V.prototype.getPath=V.prototype.mA;V.prototype.Tk=function(a){if(a)if("object"==typeof a)this.Fa=a;else throw new D(this.Tk,0,\'Parameter "params" must be an object.\');else this.Fa={};return this};V.prototype.setQuery=V.prototype.Tk;V.prototype.Cu=function(){return!xo(this)};\nV.prototype.hasQuery=V.prototype.Cu;V.prototype.getQuery=function(){return this.Fa};V.prototype.getQuery=V.prototype.getQuery;V.prototype.Wr=function(a){if(void 0===a)this.uk=a;else{var b=ac(+a<<0,0,65535);if(b!=a)throw new D(this.Wr,0,\'Parameter "port" must be an integer in range [0...65535]\');this.uk=b}return this};V.prototype.setPort=V.prototype.Wr;V.prototype.rA=function(){return this.uk};V.prototype.getPort=V.prototype.rA;V.prototype.Nw=function(a){this.Db=a||void 0;return this};\nV.prototype.setAnchor=V.prototype.Nw;V.prototype.yp=function(){return this.Db};V.prototype.getAnchor=V.prototype.yp;V.prototype.B=function(a){if("object"!==typeof a)throw new D(this.B,0,\'Parameter "other" must be an object.\');var b=this.Fa,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};V.prototype.mergeQuery=V.prototype.B;\nV.prototype.Ha=function(a){if(!a||"string"!==typeof a)throw new D(this.Ha,0,\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Qk(a+"."+this.Qj)};V.prototype.addSubDomain=V.prototype.Ha;V.prototype.v=function(a){if(!a||"string"!==typeof a)throw new D(this.v,0,\'Parameter "subPath" must be a non-empty string\');return this.Fg((this.hf?this.hf+"/":"")+a)};V.prototype.addSubPath=V.prototype.v;\nV.prototype.toString=function(){return[this.oi+"://",this.Qj,this.uk?":"+this.uk:"",this.hf||!xo(this)||this.Db?"/":"",this.hf?encodeURI(this.hf):"",yo(this),this.Db?"#"+encodeURIComponent(this.Db):""].join("")};V.prototype.toString=V.prototype.toString;function zo(a){return encodeURIComponent(a).replace(/[!\'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}\nfunction yo(a){var b=[],c=a.Fa,d={},e;for(e in c){if(c.hasOwnProperty(e)&&"function"!==typeof c[e]){var f=a.Fa[e];d.Og=zo(e);C(f,Ao)?f.jo.forEach(function(g){return function(h){b.push(g.Og+"="+zo(h))}}(d)):C(f,Bo)?b.push(d.Og+"="+f.jo.map(function(g){return zo(g)}).join(f.Qy)):b.push(void 0===f?d.Og:d.Og+"="+zo(f))}d={Og:d.Og}}return 0<b.length?"?"+b.join("&"):""}\nfunction ro(a){var b=Zm("H-service","1.57.0","161a2e3",{region:"row"});a.Fa.xnlp="CL_JSMv3."+b.version;return a}function xo(a){var b,c=0;for(b in a.Fa)if(a.Fa.hasOwnProperty(b)&&"function"!==typeof a.Fa[b]&&(c++,0<c))break;return!c}function Co(a,b){if(fb(a))for(var c=0;c<a.length;c++){var d=a[c];if(!gb(d)&&!jb(d)){var e="The Array does not contain only strings and numbers";break}}else e="Not an Array";if(e)throw new D(b,0,a);return a}\nfunction Ao(a){this.jo=Co(a,Ao)}V.MultiValueQueryParameter=Ao;Ao.prototype.LA=function(){return this.jo};Ao.prototype.getValues=Ao.prototype.LA;function Bo(a,b){this.jo=Co(a,Bo);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new D(Bo,1,\'Invalid delimiter "\'+b+\'"\');this.Qy=b}V.DelimitedQuerySubValues=Bo;function X(a){a=jo({},this.Oy,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:"baseUrl":"apikey")throw new D(X,0,\'"\'+c+\'" must be specified\');this.Qw(a.baseUrl);this.ct=b;this.kd.B({apikey:b});this.Mc=a.headers||{};this.UC=Na(a.servicesConfig||{})}t("H.service.Platform",X);X.prototype.Oy={apikey:null,baseUrl:new V("https","hereapi.com")};X.prototype.Qw=function(a){this.kd=ro(a.clone());this.ct=a=this.ct;this.kd.B({apikey:a})};X.prototype.setBaseUrl=X.prototype.Qw;X.prototype.Ic=function(){return this.kd};\nX.prototype.getBaseUrl=X.prototype.Ic;X.prototype.Ta=function(a,b){try{return a.Hm=!0,new a(jo({platformBaseUrl:this.Ic(),headers:this.Mc},this.UC[a.CONFIG_KEY]||{},b||{}))}finally{a.Hm=!1}};X.prototype.createService=X.prototype.Ta;\nX.prototype.Yl=function(a,b,c){var d=this;if(!H.map.render.harp)throw Error("HARP engine module not found");if(!ya(a)&&!gb(a))throw new D(this.Yl,0,"is invalid: must be either a configuration object or a URL");if(!Za(b))throw new D(this.Yl,1,"is invalid: must be a Function");if(!Za(c))throw new D(this.Yl,2,"is invalid: must be a Function");var e=new H.map.render.harp.Style(a);e.addEventListener("change",function(){var f=e.getState();if(-1===f)c(Error("H.service.platform#createHybridLayers method failed to load style configuration"));\nelse if(2===f){f={dark:!0};var g=d.Qp({resource:"background",queryParams:{style:"satellite.day"}}),h=e.Rd(),k={styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]};h.definitions&&(void 0!==h.definitions["Satellite.Texture.Gamma"]&&(k.styles[0].attr.gamma=h.definitions["Satellite.Texture.Gamma"]),void 0!==h.definitions["Satellite.Texture.Brightness"]&&(k.styles[0].attr.brightness=h.definitions["Satellite.Texture.Brightness"]));g=new uo(g,{engineType:Wm,style:new H.map.render.harp.Style(k)});\nb({raster:new Dk(g,f),vector:d.Lj().md(e,{engineType:Wm},f),traffic:d.Tp().md(e,{engineType:Wm},f)})}});e.load()};X.prototype.createHybridLayers=X.prototype.Yl;function Do(a){Do.g.constructor.call(this,Do,a);this.Iw=qo(this,a).reverseSubDomain;ko(Do,"Use HERE Geocoding and Search API v7 instead.")}u(Do,po);t("H.service.GeocodingService",Do);Do.prototype.Ca=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}};Do.CONFIG_KEY="geocoding";Do.prototype.qd=function(a){return Error(a.Details||a.message||a.error)};Do.prototype.xp=function(a,b,c){a=this.i().clone().v("geocode.json").B(a);return this.s(a,b,c)};\nDo.prototype.geocode=Do.prototype.xp;Do.prototype.Fr=function(a,b,c){a=this.i().clone().v("reversegeocode.json").B(a);this.Iw&&a.Ha(this.Iw);return this.s(a,b,c)};Do.prototype.reverseGeocode=Do.prototype.Fr;Do.prototype.search=function(a,b,c){a=this.i().clone().v("search.json").B(a);return this.s(a,b,c)};Do.prototype.search=Do.prototype.search;X.prototype.Pz=function(a){return this.Ta(Do,a)};X.prototype.getGeocodingService=X.prototype.Pz;function Eo(a){Eo.g.constructor.call(this,Eo,a)}u(Eo,po);t("H.service.publicTransit.Service",Eo);Eo.prototype.Ca=function(){return{subDomain:"transit.router",path:"v8"}};Eo.CONFIG_KEY="publicTransit";Eo.prototype.yA=function(a,b,c){a=this.i().clone().v("routes").B(a);return this.s(a,b,c)};Eo.prototype.getRoutes=Eo.prototype.yA;Eo.prototype.Fz=function(a,b,c){a=this.i().clone().v("departures").B(a);return this.s(a,b,c)};Eo.prototype.getDepartures=Eo.prototype.Fz;\nEo.prototype.CA=function(a,b,c){a=this.i().clone().v("stations").B(a);return this.s(a,b,c)};Eo.prototype.getStations=Eo.prototype.CA;Eo.prototype.qd=function(a){return Error(JSON.stringify(a))};X.prototype.uA=function(a){return this.Ta(Eo,a)};X.prototype.getPublicTransitService=X.prototype.uA;function Fo(a){Fo.g.constructor.call(this,Fo,a)}u(Fo,po);t("H.service.SearchService",Fo);Fo.CONFIG_KEY="search";Fo.prototype.Ca=function(){return{subDomain:"search",path:"v1"}};Fo.prototype.qd=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(". "))};Fo.prototype.xp=function(a,b,c){a=this.i().clone().Ha("geocode").v("geocode").B(a);return this.s(a,b,c)};Fo.prototype.geocode=Fo.prototype.xp;\nFo.prototype.Fr=function(a,b,c){a=this.i().clone().Ha("revgeocode").v("revgeocode").B(a);return this.s(a,b,c)};Fo.prototype.reverseGeocode=Fo.prototype.Fr;Fo.prototype.oy=function(a,b,c){a=this.i().clone().Ha("autosuggest").v("autosuggest").B(a);return this.s(a,b,c)};Fo.prototype.autosuggest=Fo.prototype.oy;Fo.prototype.Ry=function(a,b,c){a=this.i().clone().Ha("discover").v("discover").B(a);return this.s(a,b,c)};Fo.prototype.discover=Fo.prototype.Ry;\nFo.prototype.vB=function(a,b,c){a=this.i().clone().Ha("lookup").v("lookup").B(a);return this.s(a,b,c)};Fo.prototype.lookup=Fo.prototype.vB;Fo.prototype.sy=function(a,b,c){a=this.i().clone().Ha("browse").v("browse").B(a);return this.s(a,b,c)};Fo.prototype.browse=Fo.prototype.sy;X.prototype.BA=function(a){return this.Ta(Fo,a)};X.prototype.getSearchService=X.prototype.BA;function Go(a,b,c){c=c||{};var d=+c.min,e=+c.max;c.min=d?ac(d,1,17):1;c.max=e?ac(e,1,17):17;Go.g.constructor.call(this,c);C(a,Ho,Go,0);C(b,cf,Go,1);this.$=a;b.Yb&&b.Yb("OMV");this.Xa(b,!0);this.Hl=io(this)}u(Go,R);t("H.service.trafficVectorTile.Provider",Go);Go.prototype.Vc=xe;Go.prototype.providesOMV=Go.prototype.Vc;Go.prototype.cc=function(a){return this.Hl.test(a)};Go.prototype.cacheFilter=Go.prototype.cc;Go.prototype.Ud=function(a,b,c){return this.$.Rf(a,b,c).toString()};\nGo.prototype.getTileKey=Go.prototype.Ud;Go.prototype.Sb=function(){return this.vf};Go.prototype.getCache=Go.prototype.Sb;Go.prototype.MAX_STORE_TIME=2592E6;Go.prototype.Vi=function(){return Mm()};Go.prototype.sd=function(){return Mm()?Lm():Go.g.sd.call(this)};Go.prototype.s=function(a,b,c,d,e){return this.$.Oa(a,b,c,d,e)};Go.prototype.requestInternal=Go.prototype.s;Go.prototype.Cb=function(a){a.Yb&&a.Yb("OMV");this.Xa(a)};Go.prototype.setStyle=Go.prototype.Cb;Go.prototype.J=function(){return Go.g.mb.apply(this)};\nGo.prototype.getStyle=Go.prototype.J;Go.prototype.vf=new Ri(256);Go.prototype.U=function(){return null};Go.prototype.getCopyrights=Go.prototype.U;function Ho(a){Ho.g.constructor.call(this,Ho,a);this.Aq=(a||Be).layer||"traffic";this.le="mc";this.iz="omv"}u(Ho,po);t("H.service.trafficVectorTile.Service",Ho);Ho.prototype.Ca=function(){return{subDomain:"traffic.vector",path:"v2"}};Ho.CONFIG_KEY="trafficVectorTile";Ho.prototype.md=function(a,b,c){b=b||{};var d={min:0,max:22};ya(c)&&jo(d,c);return new Dk(new Go(this,a,b),d)};Ho.prototype.createLayer=Ho.prototype.md;\nHo.prototype.Oa=function(a,b,c,d,e){return this.s(this.Rf(a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,"arraybuffer")};Ho.prototype.Rf=function(a,b,c){return this.i().clone().v("traffictiles/"+this.Aq+"/"+this.le+"/"+c+"/"+a+"/"+b+"/"+this.iz)};Ho.prototype.rm=function(a){return ln()+"/"+a};Ho.prototype.$z=function(){return this.Aq};Ho.prototype.getLayerName=Ho.prototype.$z;X.prototype.Tp=function(a){return this.Ta(Ho,a)};X.prototype.getTrafficVectorTileService=X.prototype.Tp;function Io(a){Io.g.constructor.call(this,Io,a)}u(Io,po);t("H.service.traffic.Service7",Io);Io.prototype.Ca=function(){return{subDomain:"data.traffic",path:"v7"}};Io.CONFIG_KEY="traffic_v7";Io.prototype.IC=function(a,b,c,d){a=this.i().clone().v(["incidents",a].join("/")).B(b||{});return this.s(a,c,d)};Io.prototype.requestIncidentById=Io.prototype.IC;Io.prototype.GC=function(a,b,c){a=this.i().clone().v("flow").B(a||{});return this.s(a,b,c)};Io.prototype.requestFlowByArea=Io.prototype.GC;\nIo.prototype.LC=function(a,b,c){a=this.i().clone().v("incidents").B(a||{});return this.s(a,b,c)};Io.prototype.requestIncidentsByArea=Io.prototype.LC;var Jo="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function Ko(a,b,c,d){Ko.g.constructor.call(this,{min:10,max:21,engineType:d});C(a,Lo,Ko,0);this.$=a;this.Fa=c||Mo;this.Fa.responseattributes="sh,fc";this.yr=setInterval(A(this.reload,this),b||18E4);this.vb===Rf.WEBGL?this.Xa(new Bf(a.rm("traffic/flow.yaml")),!0):this.Xa(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow",\n"green"],width:3,metricUnit:"Pixel"}}]}))}u(Ko,R);t("H.service.traffic.flow.Provider",Ko);Ko.prototype.rr=xe;Ko.prototype.providesGeoJSON=Ko.prototype.rr;Ko.prototype.J=function(){return this.mb()};Ko.prototype.getStyle=Ko.prototype.J;Ko.prototype.Cb=function(a){a.Yb&&a.Yb("GeoJSONTileSource");this.Xa(a)};Ko.prototype.setStyle=Ko.prototype.Cb;var Mo={locationreferences:"tmc,shp"};Ko.prototype.disposeInternal=function(){Ko.g.disposeInternal.call(this);clearInterval(this.yr)};\nKo.prototype.s=function(a,b,c,d,e){return this.$.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf("Error")?e(f.Details):d(f)},e,this.Fa)};Ko.prototype.requestInternal=Ko.prototype.s;\nKo.prototype.nd=function(a,b,c,d,e){var f,g,h,k,l={type:"FeatureCollection",features:[]},n;var p=d.RWS.length;for(f=0;f<p;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==Jo.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var y=r[q].FIS;var G=y.length;for(y=0;y<G;y++){var I=r[q].FIS[y].FI;var P=I.length;for(g=0;g<P;g++){var W=I[g];var Ua=[];var ba=W.CF[0];var ub=!!ba.SSS;var Ca={type:"Feature",properties:ba,geometry:{type:"MultiLineString",coordinates:Ua}};Ca.properties.LHT=\nw;W.SHP.length&&(Ca.properties.FC=W.SHP[0].FC);ub&&(n=[]);for(ba=0;ba<W.SHP.length;ba++){var Qa=W.SHP[ba].value;var ic=Qa.length;for(h=0;h<ic;h++){var jc=ub?n:void 0,La=new Gh(Qa[h].trim()),Bc=[],Lc={};for(La.yi();-1!==(k=La.eb());)k===No?(Lc.lat=+String.fromCharCode.apply(Ko,La.mh()),La.next(),La.yi()):k===Oo?(Lc.lng=+String.fromCharCode.apply(Ko,La.mh()),Bc.push([Lc.lng,Lc.lat]),jc&&jc.push(hd(Lc)),Lc=[],La.next(),La.yi()):La.next();Lc.lng=+String.fromCharCode.apply(Ko,La.mh());Bc.push([Lc.lng,\nLc.lat]);jc&&jc.push(hd(Lc));k=Bc;Ua.push(k)}}l.features.push(Ca)}}}}return Ko.g.nd.call(this,a,b,c,l,e)};Ko.prototype.createTileInternal=Ko.prototype.nd;var Oo=32,No=44;function Po(){this.ud={}}Po.prototype.kc=function(a,b){var c=a+b,d;if(d=this.ud[c])return d;a=Qo.MARKER.replace("{{icon}}",Ro[a]||Ro.OTHER);a=a.replace("{{color}}",So[b]||So.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Ii(Ji.POLYGON,To.MARKER)};return this.ud[c]=d=new um(a,b)};\nvar Qo={MARKER:\'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>\'},Ro=\n{CONGESTION:\'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>\',\nROADWORKS:\'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>\',\nACCIDENT:\'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>\',\nOTHER:\'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>\'},\nSo={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},To={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Uo(a){if(!a||!Za(a.requestData))throw new D(Uo,0,"options.requestData");Uo.g.constructor.call(this,a);this.EC=a.requestData;this.uC=!!a.providesDomMarkers}u(Uo,R);t("H.map.provider.MarkerTileProvider",Uo);Uo.prototype.s=function(a,b,c,d,e){var f=this;return this.EC(a,b,c,function(g){for(var h=[],k,l,n=g.length;n--;)l=g[n],l.qD=f.getTileKey(a,b,c),l.ea(f),k=l.kc(),(C(l,Pi)||1===k.getState())&&h.push(g[n]);d(h)},e)};Uo.prototype.requestInternal=Uo.prototype.s;\nUo.prototype.Hh=function(a,b){b===li.VISUAL&&(a=this.Sb().get(a.qD))&&(a.valid=!1,this.jb(a))};Uo.prototype.invalidateObject=Uo.prototype.Hh;Uo.prototype.Tc=function(){return this.uC};Uo.prototype.providesDomMarkers=Uo.prototype.Tc;Uo.prototype.Uc=xe;Uo.prototype.providesMarkers=Uo.prototype.Uc;function Vo(a,b,c){c=c?c:{};c.criticality||(c.criticality="major,critical");C(a,Lo,Vo,0);Uo.call(this,{max:20,min:8,requestData:A(this.JC,this),engineType:c.engineType});this.ud=new Po;this.$=a;this.Fa=c;this.reload=A(this.reload,this);this.yr=setInterval(this.reload,b||18E4)}u(Vo,Uo);t("H.service.traffic.incidents.Provider",Vo);var Wo={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};\nVo.prototype.JC=function(a,b,c,d,e){var f=this,g=this.ud;return this.$.requestIncidentsByTile(a,b,c,function(h){var k=[];h=h.TRAFFIC_ITEMS;var l;if(h)for(h=h.TRAFFIC_ITEM,l=h.length;l--;){var n=h[l];var p=n.TRAFFIC_ITEM_TYPE_DESC;switch(p){case "ACCIDENT":case "CONGESTION":var q=p;break;case "CONSTRUCTION":q="ROADWORKS";break;default:q="OTHER"}q=g.kc(q,Wo[n.CRITICALITY.DESCRIPTION]);p=n.LOCATION.GEOLOC.ORIGIN;p=new $m({lat:p.LATITUDE,lng:p.LONGITUDE},{provider:f,icon:q});p.setData(n);k.push(p)}d(k)},\ne,this.Fa)};Vo.prototype.l=function(){Uo.prototype.l.call(this);clearInterval(this.yr)};Vo.prototype.dispose=Vo.prototype.l;function Xo(a){function b(n){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete Xo.Br[f];n&&a.Ot&&a.Ot.call(k,n)}if(!a.url||!a.Oo)throw Error(\'Parameter "options" must specify at least a URL and a callback.\');if("function"!==typeof a.Oo)throw Error("Parameters options.callback must be a function");var c=a.VD||document;var d=c.getElementsByTagName("head")[0];var e=c.createElement("script");c=a.url instanceof V?a.url:wo(a.url,a.TD);var f=Xo.PC++;var g=a.vy||"callback";var h=a.Oo;var k={};var l=\nnull;k.id=f;k.cancel=function(){b("cancelled")};0!==a.timeout&&(l=x.setTimeout(function(){b("timeout")},a.timeout||3E4));Xo.Br[f]=function(n){b();h.call(k,n)};e.type="text/javascript";e.src=c.toString()+(c.Cu()?"&":"?")+g+"="+(a.WD?"H.service.jsonp.handleResponse("+f+")":encodeURI("H.service.jsonp.handleResponse("+f+")"));d.appendChild(e);return k}t("H.service.jsonp",Xo);Xo.RA=function(a){return(a=Xo.Br[a])?a:function(){}};Xo.handleResponse=Xo.RA;Xo.PC=0;Xo.Br={};function Lo(a){Lo.g.constructor.call(this,Lo,a);this.wy=qo(this,a).callbackKey;this.Xe=!1}u(Lo,po);t("H.service.traffic.Service",Lo);Lo.prototype.Ca=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}};Lo.CONFIG_KEY="traffic";Lo.prototype.ut=function(a,b){return new Dk(new Ko(this,void 0,a,b),{max:22})};Lo.prototype.createFlowLayer=Lo.prototype.ut;Lo.prototype.vt=function(a){return new hg(new Vo(this,void 0,a))};Lo.prototype.createIncidentsLayer=Lo.prototype.vt;\nfunction Yo(a,b,c,d){a.Xe||(ko(Lo,"Use HERE Traffic API v7 instead."),a.Xe=!0);return Xo({url:b,Oo:c,Ot:function(e){d(Error("["+e+"] "+b+" request failed"))},vy:a.wy})}Lo.prototype.KC=function(a,b,c){a=this.i().clone().v("incidents.json").B(a);return Yo(this,a,b,c)};Lo.prototype.requestIncidents=Lo.prototype.KC;Lo.prototype.HC=function(a,b,c,d,e,f){a=this.i().clone().v(["flow/json",c,a,b].join("/")).B(f||{});return Yo(this,a,d,e)};Lo.prototype.requestFlowByTile=Lo.prototype.HC;\nLo.prototype.MC=function(a,b,c,d,e,f){a=this.i().clone().v(["incidents/json",c,a,b].join("/")).B(f||{});return Yo(this,a,d,e)};Lo.prototype.requestIncidentsByTile=Lo.prototype.MC;Lo.prototype.rm=function(a){return ln()+"/"+a};X.prototype.Sp=function(a,b){b=b||6;if(6===b)b=Lo;else if(7===b)b=Io;else throw new D(this.Sp,1,"allowed values are 6 and 7");return this.Ta(b,a)};X.prototype.getTrafficService=X.prototype.Sp;function Zo(a){ko(Zo,"Use HERE Geocoding and Search API v7 instead.");Zo.g.constructor.call(this,Zo,a)}u(Zo,po);t("H.service.PlacesService",Zo);Zo.prototype.Ca=function(){return{subDomain:"places.ls",path:"places/v1"}};Zo.CONFIG_KEY="places";Zo.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"};Zo.prototype.request=function(a,b,c,d){return this.K(a,b,c,d)};Zo.prototype.request=Zo.prototype.request;\nZo.prototype.K=function(a,b,c,d){a=this.i().clone().v(a).B(b||{});return this.s(a,c,d)};Zo.prototype.search=function(a,b,c){return this.K("discover/search",a,b,c)};Zo.prototype.search=Zo.prototype.search;Zo.prototype.oD=function(a,b,c){return this.K("suggest",a,b,c)};Zo.prototype.suggest=Zo.prototype.oD;Zo.prototype.dz=function(a,b,c){return this.K("discover/explore",a,b,c)};Zo.prototype.explore=Zo.prototype.dz;Zo.prototype.my=function(a,b,c){return this.K("discover/around",a,b,c)};\nZo.prototype.around=Zo.prototype.my;Zo.prototype.TA=function(a,b,c){return this.K("discover/here",a,b,c)};Zo.prototype.here=Zo.prototype.TA;Zo.prototype.yy=function(a,b,c){return this.K("categories/places",a,b,c)};Zo.prototype.categories=Zo.prototype.yy;Zo.prototype.gz=function(a,b,c,d){a=wo(a).B(this.i().getQuery()).B(d||{});return this.s(a,b,c)};Zo.prototype.follow=Zo.prototype.gz;X.prototype.nA=function(a){return this.Ta(Zo,a)};X.prototype.getPlacesService=X.prototype.nA;function $o(a){$o.g.constructor.call(this,$o,a);this.tu=a.getToken}u($o,po);t("H.service.iml.Service",$o);$o.prototype.Ca=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}};\n$o.prototype.qd=function(a){function b(){for(var d=fa(c),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.format;if(e.keys.every(function(g){return a[g]}))return f()}return JSON.stringify(a)}var c=[{keys:["code","title","cause","action"],format:function(){return a.code+": "+a.title+"; cause: "+a.cause+"; action: "+a.action}},{keys:["error","error_description"],format:function(){return a.error+": "+a.error_description}},{keys:["error","errorMessage"],format:function(){return a.error+": "+a.errorMessage}}];\nreturn Error(ya(a)?b():a)};$o.prototype.Dh=function(a,b,c,d,e){var f=this.Dh;ap(f,0,a,b);bp(f,2,c,d);a=this.i().clone().v(a+"/layers/"+b+"/statistics").B(e||{});return this.K(a,"GET",c,d)};$o.prototype.getStatistics=$o.prototype.Dh;$o.prototype.lm=function(a,b,c,d,e,f,g,h,k){var l=k?"":".mvtf";a=this.i().clone().v(d+"/layers/"+e+"/tile/web/"+c+"_"+a+"_"+b+l).B(Object.assign({clip:!0},h));return this.K(a,"GET",k?f:function(n){return n.arrayBuffer().then(f)},g,void 0,k?"application/json":"arraybuffer")};\n$o.prototype.getFeaturesByTile=$o.prototype.lm;$o.prototype.hu=function(a,b,c,d,e,f){var g=this.hu;cp(g,a);ap(g,1,b,c);bp(g,3,d,e);a=dp(this,a,b,c,f);return this.K(a,"GET",d,e)};$o.prototype.getFeatureById=$o.prototype.hu;$o.prototype.Te=function(a,b,c,d,e,f){var g=this.Te;ep(g,a);ap(g,1,b,c);bp(g,3,d,e);a=fp(this,a,b,c,f);return this.K(a,"GET",d,e)};$o.prototype.getFeaturesById=$o.prototype.Te;\n$o.prototype.wh=function(a,b,c,d,e){var f=this.wh;if(!ya(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(f,0,\'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"\');ap(f,1,b,c);bp(f,3,d,e);a=this.i().clone().v(b+"/layers/"+c+"/bbox").B(a);return this.K(a,"GET",d,e)};$o.prototype.getFeaturesByBoundingBox=$o.prototype.wh;\n$o.prototype.ju=function(a,b,c,d,e){var f=this.ju;if(!(ya(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(f,0,\'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"\');ap(f,1,b,c);bp(f,3,d,e);a=this.i().clone().v(b+"/layers/"+c+"/spatial").B(a);return this.K(a,"GET",d,e)};$o.prototype.getFeaturesByPointAndRadius=$o.prototype.ju;\n$o.prototype.iu=function(a,b,c,d,e,f){var g=this.iu;if(!ya(a)||!a.radius)throw new D(g,0,\'must be an object with "radius"\');gp(g,1,b);ap(g,2,c,d);bp(g,4,e,f);a=this.i().clone().v(c+"/layers/"+d+"/spatial").B(a);return this.K(a,"POST",e,f,b)};$o.prototype.getFeaturesByGeometryAndRadius=$o.prototype.iu;$o.prototype.Lw=function(a,b,c,d,e){var f=this.Lw;ap(f,0,a,b);bp(f,2,c,d);a=this.i().clone().v(a+"/layers/"+b+"/search").B(e||{});return this.K(a,"GET",c,d)};$o.prototype.searchFeatures=$o.prototype.Lw;\n$o.prototype.Zu=function(a,b,c,d,e){var f=this.Zu;ap(f,0,a,b);bp(f,2,c,d);a=this.i().clone().v(a+"/layers/"+b+"/iterate").B(e||{});return this.K(a,"GET",c,d)};$o.prototype.iterateFeatures=$o.prototype.Zu;$o.prototype.mf=function(a,b,c,d,e,f){var g=this.mf;gp(g,0,a);ap(g,1,b,c);bp(g,3,d,e);b=hp(this,b,c,f);return this.K(b,"PUT",d,e,a)};$o.prototype.putFeatures=$o.prototype.mf;\n$o.prototype.kf=function(a,b,c,d,e,f){var g=this.kf;gp(g,0,a);ap(g,1,b,c);bp(g,3,d,e);b=hp(this,b,c,f);return this.K(b,"POST",d,e,a)};$o.prototype.postFeatures=$o.prototype.kf;$o.prototype.Hf=function(a,b,c,d,e){var f=this.Hf;ep(f,a);ap(f,1,b,c);bp(f,3,d,e);a=fp(this,a,b,c);return this.K(a,"DELETE",d,e)};$o.prototype.deleteFeatures=$o.prototype.Hf;$o.prototype.vw=function(a,b,c,d,e,f,g){var h=this.vw;cp(h,a);gp(h,1,b);ap(h,2,c,d);bp(h,4,e,f);a=dp(this,a,c,d,g);return this.K(a,"PUT",e,f,b)};\n$o.prototype.putFeature=$o.prototype.vw;$o.prototype.bw=function(a,b,c,d,e,f,g){var h=this.bw;cp(h,a);gp(h,1,b);ap(h,2,c,d);bp(h,4,e,f);a=dp(this,a,c,d,g);return this.K(a,"PATCH",e,f,b)};$o.prototype.patchFeature=$o.prototype.bw;$o.prototype.Ct=function(a,b,c,d,e){var f=this.Ct;cp(f,a);ap(f,1,b,c);bp(f,3,d,e);a=dp(this,a,b,c);return this.K(a,"DELETE",d,e,void 0,"text/plain")};$o.prototype.deleteFeature=$o.prototype.Ct;\nfunction hp(a,b,c,d){return a.i().clone().v(b+"/layers/"+c+"/features").B(d||{})}function fp(a,b,c,d,e){b=Object.assign({},e,{id:new Ao(b)});return hp(a,c,d,b)}function dp(a,b,c,d,e){return a.i().clone().v(c+"/layers/"+d+"/features/"+b).B(e||{})}\n$o.prototype.K=function(a,b,c,d,e,f){f=void 0===f?"application/json":f;b={method:b,headers:Object.assign({},e?{"Content-Type":"application/geo+json"}:void 0,"function"===typeof this.tu?{Authorization:"Bearer "+this.tu()}:void 0,this.Mc)};e&&(b.data=JSON.stringify(e));e=new Ue(f,a.toString(),ge,b);e.then(c,so(this,a,d));return e};$o.CONFIG_KEY="iml";function ap(a,b,c,d){db(c,"String",a,b,"must be a string");db(d,"String",a,b+1,"must be a string")}\nfunction cp(a,b){db(b,"String",a,0,"must be a string")}function ep(a,b){if(!Array.isArray(b)||0===b.length||b.some(function(c){return"string"!==typeof c}))throw new D(a,0,"must be a non-empty array of strings");}function gp(a,b,c){if(!ya(c))throw new D(a,b,"must be a GeoJSON object");}function bp(a,b,c,d){if(!Za(c))throw new D(a,b,"must be a function");if(!Za(d))throw new D(a,b+1,"must be a function");}X.prototype.Uz=function(a){return this.Ta($o,a)};X.prototype.getIMLService=X.prototype.Uz;function ip(a,b,c,d){ip.g.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0);C(a,$o,ip,0);if(!gb(b))throw new D(ip,1,\'"catalogHrn" must be a string\');if(!gb(c))throw new D(ip,2,\'"layerId" must be a string\');this.$=a;this.$g=b;this.Mh=c;this.Ok=ya(d)&&ya(d.parameters)?d.parameters:{};this.Xa(this.Ep())}u(ip,R);t("H.service.iml.Provider",ip);ip.prototype.s=function(a,b,c,d,e){return this.$.lm(a,b,c,this.$g,this.Mh,d,e,this.Ok)};ip.prototype.requestInternal=ip.prototype.s;\nip.prototype.Vc=xe;ip.prototype.providesOMV=ip.prototype.Vc;ip.prototype.J=function(){return this.mb()};ip.prototype.getStyle=ip.prototype.J;ip.prototype.Cb=function(a){C(a,Bf)&&a.Yb("MVT");this.Xa(a)};ip.prototype.setStyle=ip.prototype.Cb;\nip.prototype.Ep=function(){return this.vb===Rf.WEBGL?new Bf({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.$g+":"+this.Mh},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",\ncap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.$g+":"+this.Mh,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.$g+":"+this.Mh,when:["==",["geometry-type"],"Polygon"],technique:"polygon",color:"#E39E3C",renderOrder:201},{layer:this.$g+":"+this.Mh,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",width:"1px",renderOrder:202},{layer:this.$g+\n":"+this.Mh,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",width:"2px",renderOrder:203}]})};function jp(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.i().clone().v(b+"/"+a.fb+"/"+c).B(f),l=a.$c;this.$=a;this.qx=k;kj.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(n,p,q){var r=h.qx.clone();l&&r.Ha(l[(q+p+n)%l.length]);r.v(q+"/"+n+"/"+p+"/"+d+"/"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,"")+d,engineType:g.engineType});this.sD=b;this.oi=c;this.Fa=f;this.Xo=c.split(".")[0];this.Be=A(this.Be,this);this.getCopyrights=\nthis.U;this.Xe=!1;a.addEventListener("versionupdate",this.Be)}u(jp,kj);jp.prototype.MAX_STORE_TIME=2592E6;jp.prototype.s=function(a,b,c,d,e,f){this.Xe||(ko(kp,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.Xe=!0);return jp.g.s.call(this,a,b,c,d,e,f)};jp.prototype.requestInternal=jp.prototype.s;jp.prototype.disposeInternal=function(){kj.prototype.disposeInternal.call(this);this.$.removeEventListener("versionupdate",this.Be)};\njp.prototype.U=function(a,b){return this.$.U().query(this.Xo,b,a)};jp.prototype.getCopyrights=jp.prototype.U;jp.prototype.Be=function(){var a=this.$;this.qx=a.i().clone().v(this.sD+"/"+a.fb+"/"+this.oi).B(this.Fa);this.reload(!1)};jp.prototype.Vi=function(){return Mm()};jp.prototype.sd=function(){return Mm()?Lm():jp.g.sd.call(this)};function lp(){this.qs={}}function mp(a,b){for(var c in b)b.hasOwnProperty(c)&&a.Bo(c,b[c])}lp.prototype.Bo=function(a,b){a=this.qs[a]||(this.qs[a]=[]);var c,d=b.length;for(c=0;c<d;c++){var e=new lo.Rs(b[c]);a.push(e)}};lp.prototype.query=function(a,b,c){a=this.qs[a];var d,e=a?a.length:0,f=[];for(d=0;d<e;d++)a[d].Vf(b,c)&&f.push(a[d]);return f};\nlo.Rs=function(a){var b,c=a.boxes;this.alt=a.alt;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.Gn=[];if(c&&(b=c.length)){var d=c[0];var e=new J(d[0],d[1],d[2],d[3]);this.Gn.push(e);this.rn=new J(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new J(d[0],d[1],d[2],d[3]),this.Gn.push(e),this.rn.yd(e,!1,this.rn)}};lo.Rs.prototype.Vf=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.Gn.length)&&this.rn){if(this.rn.Vf(b))for(;a--;)if(this.Gn[a].Vf(b))return!0}else return!0;return!1};function kp(a){kp.g.constructor.call(this,kp,a);a=qo(this,a);this.$c=a.shards;(this.Qa=a.ignoreTypes?null:a.type)&&this.i().Ha(this.Qa);this.fb=a.version;this.ec=new lp;this.pr={};this.Wl=0;"newest"===this.fb&&this.rp()}u(kp,po);t("H.service.MapTileService",kp);kp.prototype.Ca=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}};kp.CONFIG_KEY="maptile";\nfunction np(a,b){for(var c={},d=a[b+"s"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+"s"]=c}kp.prototype.uu=function(){return this.Qa};kp.prototype.getType=kp.prototype.uu;kp.prototype.Wp=function(){return this.fb};kp.prototype.getVersion=kp.prototype.Wp;kp.prototype.cs=function(a){this.fb=a};kp.prototype.U=function(){this.Wl||(this.fb&&"newest"!==this.fb||"traffic"===this.Qa)&&this.Jf();return this.ec};kp.prototype.getCopyrights=kp.prototype.U;m=kp.prototype;\nm.ss=function(a){a=a.response;var b;np(a,"map");np(a,"scheme");np(a,"tiletype");np(a,"format");np(a,"resolution");np(a,"language");if("newest"===this.fb&&"traffic"!==this.Qa)for(b in a.maps)a.maps[b].hash&&a.maps[b].newest&&(this.cs(a.maps[b].hash),this.dispatchEvent("versionupdate"));this.fq=a;this.dispatchEvent("infoupdate")};m.pl=function(a){mp(this.ec,a);this.dispatchEvent("copyrightupdate")};\nm.rp=function(){var a=this;var b=this.i().clone().v("info").B({output:"json"});this.$c&&b.Ha(this.$c[0]);this.s(b,function(c){a.ss(c)},function(c){throw c;})};m.Jf=function(){var a=this;var b=this.i().clone().v("copyright").v(a.fb).B({output:"json"});this.$c&&b.Ha(this.$c[0]);this.Wl=1;this.s(b,function(c){a.Wl=2;a.pl(c)},function(c){a.Wl=-1;throw c;})};m.Kj=function(){return this.fq};kp.prototype.getInfo=kp.prototype.Kj;\nkp.prototype.nj=function(a,b,c,d,e,f){var g=this.i().clone().v(a+"/"+this.fb+"/"+b+"/"+c+"/"+d).B(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var n=g.charCodeAt(k);h=(h<<5)-h+n;h|=0}g=h;h=this.pr[g];h||(h=new jp(this,a,b,c,d,e,jo({headers:this.Mc},f||{})),this.pr[g]=h);return h};kp.prototype.createTileProvider=kp.prototype.nj;kp.prototype.Od=function(a,b,c,d,e,f,g,h){a=this.nj(a,b,c,d,e,h);return new Dk(a,{opacity:f,dark:!!g})};kp.prototype.createTileLayer=kp.prototype.Od;\nX.prototype.Kp=function(a){return this.Ta(kp,a)};X.prototype.getMapTileService=X.prototype.Kp;function op(a,b,c,d){if(!Za(c))throw new D(a,b,"has invalid type");if(!Za(d))throw new D(a,b+1,"has invalid type");};function pp(a,b,c,d,e,f){op(pp,1,b,c);op(pp,2,d,e);(this.Tn=a.length)?(this.Ob=a,this.mn=b,this.dn=c,this.kk=0,this.vn=A(this.vn,this),this.Hy=d,this.Fy=e,this.Yh=Ta(),Pa(this.Yh,qp,f||{}),this.ks={},x.setTimeout(this.vn,0)):b(Ae,!0)}var qp={duration:100,oz:"geometry",nz:"WKT",TC:"searchAttributes",At:B};\npp.prototype.vn=function(){var a=[];var b=!1;for(var c=Gj(),d;this.kk<this.Tn;){var e=this.Ob[this.kk];b=e.attributes;d=e.layerId||this.Yh.At;e.distance&&(b[this.Yh.TC]={nearest:new fd(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.Yh.oz]){try{var f=nh(new Gh(e))}catch(g){this.dn(new x.Error(g.message));b=!0;break}b[this.Yh.nz]=f}(e=this.ks[d])||(e=this.ks[d]=this.Hy({layerId:d,columnNames:Object.keys(b)}));b=this.Fy(e,b);a.push(b);this.kk++;if((b=this.kk===this.Tn)||Gj()-c>=this.Yh.duration){this.mn(a,\nb);break}}b?this.ks={}:this.kl=x.setTimeout(this.vn,0)};pp.prototype.cancel=function(){x.clearTimeout(this.kl);this.kk<this.Tn&&this.dn(new x.Error("parsing canceled"))};pp.prototype.cancel=pp.prototype.cancel;function rp(a,b){var c={};this.oC=a;Pa(c,b||c);lm.call(this,c);this.Jn={};a=this.Kc(ni.SPATIAL);a.update(a.Ld+1,li.ADD)}u(rp,lm);t("H.service.remote.ObjectProvider",rp);rp.prototype.l=function(){lm.prototype.l.call(this)};rp.prototype.dispose=rp.prototype.l;rp.prototype.pe=function(){return Ae};rp.prototype.requestMarkers=rp.prototype.pe;rp.prototype.oe=function(){return Ae};rp.prototype.requestDomMarkers=rp.prototype.oe;rp.prototype.wg=function(){return Ae};rp.prototype.requestOverlays=rp.prototype.wg;\nrp.prototype.Uc=xe;rp.prototype.providesMarkers=rp.prototype.Uc;rp.prototype.Tc=xe;rp.prototype.providesDomMarkers=rp.prototype.Tc;rp.prototype.me=xe;rp.prototype.providesSpatials=rp.prototype.me;rp.prototype.Nn=function(){return Ae};rp.prototype.requestSpatials=rp.prototype.Nn;function sp(a){return a.Vd(!0)}rp.prototype.On=function(a,b){a=tp(this,a,up);b&&(a=a.filter(sp));return a};rp.prototype.requestSpatialsByTile=rp.prototype.On;\nfunction tp(a,b,c){var d=b.Ji&&b.Ji[c],e;!d&&(e=b.ul)&&(delete b.ul,(b.Ji=a=a.oC.parse(a,b,e))&&(d=a[c]));return d||Ae}rp.prototype.Y=function(a){var b=a.xb();if(this.Jn[b])throw new wb(this.Y,"Remote object "+b+" already added");return this.Jn[b]=a};rp.prototype.Na=function(a){delete this.Jn[a.xb()]};var up="spatials";function vp(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;ab(a.min)||(a.min=12);vp.g.constructor.call(this,a);if(-1===wp.indexOf(c))throw new D(vp,2,"invalid resultType");this.resultType=c;if(d&&!Za(d))throw new D(vp,2,"invalid style callback");this.zi=d;this.na=a.pixelRatio||le();this.Gc=A(this.Gc,this);this.Yn(new Ri(b,A(this.je,this)));this.createTileInternal=4===c||8===c?A(this.Gy,this):A(this.Ey,this)}u(vp,R);t("H.service.extension.TileProvider",vp);\nvp.prototype.rq=!1;vp.prototype.getCapabilities=function(){return vp.g.getCapabilities.call(this)|Kf.CROP_LINES_BY_TILE|Kf.CROP_POLYGONS_BY_TILE};vp.prototype.Oa=function(a,b,c,d){return this.rq?vp.g.Oa.call(this,a,b,c,d):B};vp.prototype.requestTile=vp.prototype.Oa;vp.prototype.Gc=function(a){this.dispatchEvent(new td("error",gb(a)?a:a+"",this))};vp.prototype.Uc=function(){return 1===this.resultType};vp.prototype.providesMarkers=vp.prototype.Uc;vp.prototype.Tc=function(){return 2===this.resultType};\nvp.prototype.providesDomMarkers=vp.prototype.Tc;vp.prototype.me=function(){return 4===this.resultType||8===this.resultType};vp.prototype.providesSpatials=vp.prototype.me;function xp(a){var b=a.Ad;b||(a.aw||(a.aw=a.pu(a.resultType,a.zi,a.Gc)),b=a.Ad=new rp(a.aw),b.ea(a),b.addEventListener(a.j.za,A(a.ge,a)),b.tw=!0);return b}\nvp.prototype.Ey=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Sb().get(e);var f=2==this.resultType,g=[],h=xp(this);e?e.valid=!0:(a=e=new Wi(a,b,c,z),delete a.Ji,a.ul=d);d=f?tp(h,e,"domMarkers"):tp(h,e,"markers");for(b=d.length;b--;)a=d[b],a.ys=e,(f||1===a.kc().getState())&&g.push(a);e.data=g;return e};vp.prototype.ge=function(a){if(a=a.target.ys)a.valid=!1};vp.prototype.$C=function(a){this.Ew=!!a};vp.prototype.setTileCanvasRendering=vp.prototype.$C;vp.prototype.Ew=!0;\nvp.prototype.Gy=function(a,b,c,d){var e=xp(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Sb().get(f);h||(a=h=new Ok(f,a,b,c,g,this.na,c,e),delete a.Ji,a.ul=d);this.Ew?(d=oo.pop(g),h.L(d)||oo.push(d,g)):Uk(h);return h};vp.prototype.je=function(a,b){var c;if(4===this.resultType||8===this.resultType){a=b.bb();for(c=a.length;c--;)delete a[c].Fk[b.key];if(a=b.Hn())oo.push(a,this.tileSize),b.In()}else for(a=b.data,c=a.length;c--;)delete a[c].ys};\nvp.prototype.disposeInternal=function(){vp.g.disposeInternal.call(this);xp(this).l()};var yp={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};vp.ResultType=yp;var wp=[1,2,4,8];function zp(a,b,c,d){d=d||Bp;this.Fk={};d.provider=a;this.invalidate=ye;zp.g.constructor.call(this,b,d);delete this.invalidate;c&&(this.BD=c);this.qa(li.ADD)}u(zp,ti);t("H.service.remote.Spatial",zp);var Bp={};zp.prototype.xb=function(){return this.BD||ti.prototype.xb.call(this)};zp.prototype.getId=zp.prototype.xb;zp.prototype.Sn=ze;zp.prototype.retain=zp.prototype.Sn;zp.prototype.release=xe;zp.prototype.release=zp.prototype.release;function Cp(a,b){this.gm=a;b&&(this.labels=b)}var Dp=new Cp(Ae);\nzp.prototype.xh=function(a){return(this.Fk[a.key]||Dp).gm};zp.prototype.getGeometriesForTile=zp.prototype.xh;zp.prototype.Hp=function(a){return(this.Fk[a.key]||Dp).labels};zp.prototype.getLabels=zp.prototype.Hp;function Ep(a,b,c){a.Fk[b.key]=new Cp(c,void 0)};function Fp(){}t("H.service.extension.dataView.ITable",Fp);Fp.prototype.zh=function(){};Fp.prototype.getMeta=Fp.prototype.zh;Fp.prototype.Ch=function(){};Fp.prototype.getRowCount=Fp.prototype.Ch;Fp.prototype.Td=function(){};Fp.prototype.getRow=Fp.prototype.Td;Fp.prototype.ab=function(){};Fp.prototype.getColumnNames=Fp.prototype.ab;Fp.prototype.Fj=function(){};Fp.prototype.getColumn=Fp.prototype.Fj;Fp.prototype.ua=function(){};Fp.prototype.getCell=Fp.prototype.ua;Fp.prototype.concat=function(){};\nFp.prototype.concat=Fp.prototype.concat;function Gp(){}t("H.service.extension.dataView.IRow",Gp);Gp.prototype.ab=function(){};Gp.prototype.getColumnNames=Gp.prototype.ab;Gp.prototype.ua=function(){};Gp.prototype.getCell=Gp.prototype.ua;Gp.prototype.Qf=function(){};Gp.prototype.getTable=Gp.prototype.Qf;function Hp(a,b){this.$b=a;this.Kk=b}t("H.service.extension.dataView.ObjRow",Hp);Hp.prototype.ab=function(){return this.$b.ab()};Hp.prototype.getColumnNames=Hp.prototype.ab;Hp.prototype.ua=function(a){return this.$b.ua(this.Kk,a)};Hp.prototype.getCell=Hp.prototype.ua;Hp.prototype.Qf=function(){return this.$b};Hp.prototype.getTable=Hp.prototype.Qf;function Ip(){}t("H.service.extension.dataView.IColumn",Ip);Ip.prototype.ua=function(){};Ip.prototype.getCell=Ip.prototype.ua;function Jp(a,b){this.$b=a;this.Nl=b}t("H.service.extension.dataView.ObjColumn",Jp);Jp.prototype.ua=function(a){return this.$b.ua(a,this.Nl)};Jp.prototype.getCell=Jp.prototype.ua;function Kp(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.Ob=a;if(b)for(this.eh=b,this.To=a=Ta(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.Lq=c)}t("H.service.extension.dataView.ObjTable",Kp);m=Kp.prototype;m.Lq=B;m.Ob=B;m.eh=B;m.To=B;m.zh=function(){return this.Lq};Kp.prototype.getMeta=Kp.prototype.zh;Kp.prototype.Ch=function(){return this.Ob?this.Ob.length:0};Kp.prototype.getRowCount=Kp.prototype.Ch;Kp.prototype.Td=function(a){var b=this.Ob;return b&&b[a]?new Hp(this,a):B};\nKp.prototype.getRow=Kp.prototype.Td;Kp.prototype.ab=function(){return this.eh||Ae};Kp.prototype.getColumnNames=Kp.prototype.ab;Kp.prototype.Fj=function(a){return this.To[a]?new Jp(this,a):B};Kp.prototype.getColumn=Kp.prototype.Fj;Kp.prototype.ua=function(a,b){var c=this.Ob;return(a=c&&this.To[b]&&c[a])&&a[b]};Kp.prototype.getCell=Kp.prototype.ua;\nKp.prototype.concat=function(){var a=arguments.length,b,c=this.eh,d=""+this.eh,e=(this.Ob||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Kp))throw new D(this.concat,b);if(f.Ob){if(c&&""+f.eh!==d)throw new D(this.concat,b,"Incompatible columns!");e=e.concat(f.Ob)}}return new Kp(e,this.eh,this.Lq)};Kp.prototype.concat=Kp.prototype.concat;function Lp(a,b,c){var d=8===a;this.zi=b;this.Pt=c||ze;(this.Mm=4===a||d)?this.We=d:this.Vu=1===a;this.cu=this.Mm?"$HProjGeometry":"geometry"}\nLp.prototype.parse=function(a,b,c){var d,e={},f=[],g,h;var k=0;for(g=c.length;k<g;k++){var l=c[k];var n=l.Rows;if(l=n.length){var p=Object.keys(n[0]).filter(function(v){return"geometry"!==v&&"$HProjGeometry"!==v});p=new Kp(n,p);for(h=0;h<l;h++){var q=n[h];if(d=q[this.cu]){if(delete q[this.cu],q=p.Td(h))try{var r=this.Mm?Mp(this,a,b,q,d):Np(this,a,q,d.path);r.ea(a);f.push(r)}catch(v){this.Pt(v.message)}}else this.Pt("Layer must contain geometries")}}}e[this.Mm?"spatials":this.Vu?"markers":"domMarkers"]=\nf;return e};function Mp(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.zi&&a.zi(d);for(a=new zp(b,a.We,B,{style:l||a.Py,data:d});k!==h;){b=f;d=b.push;l=g[k++];for(var n=0,p=l.length,q=[];n<p;)q.push(new F(l[n++],l[n++]));d.call(b,q)}Ep(a,c,[new Xh(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Np(a,b,c,d){d=new fd(d[0],d[1]);var e=a.zi&&a.zi(c);a.Vu?(a={icon:e,data:c,provider:b},a=new $m(d,a)):(a={icon:e,data:c,provider:b},a=new Pi(d,a));return a};function Op(a){var b=Pp;if(!a||!gb(se(a.layerId,a.layer))||!jb(a.level)||ab(a.rowFilter)&&!Za(a.rowFilter)||ab(a.rowFilterContext)&&!ya(a.rowFilterContext))throw new D(b,1,ab("invalid layer config")?"invalid layer config":a);};function Pp(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Pp.g.constructor.call(this,c);C(a,Qp,Pp,0);Op(b);e?(c=Na(b),c.rowFilter=e.toString()):c=Na(b);delete c.layer;c.layerId=se(b.layerId,b.layer);(new Th).registerProcessor("pde","H.service.extension.worker.processor");a=a.i().clone().v(Rp+"."+Sp).B({meta:1});(new Vh("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.rq=!0;d.jb()},\nthis.Gc)}u(Pp,vp);t("H.service.extension.platformData.TileProvider",Pp);Pp.prototype.pu=function(a,b,c){a=new Lp(a,b,c);a.Py=Tp;return a};var Tp=new $h({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});\nPp.prototype.s=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Sb().get(g);var k={cancel:ze},l=!0,n=this.resultType;g&&(4===n||8===n?g.Ih()||(d(oo.pop(this.tileSize),null),l=!1):(d(z),l=!1));if(l){var p=mo.setTimeout(function(){h=new Vh("pde",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():mo.clearTimeout(p)}}return k};Pp.prototype.requestInternal=Pp.prototype.s;\nPp.prototype.disposeInternal=function(){Pp.g.disposeInternal.call(this);new Vh("pde",{message:[this.uid,3]})};Pp.ResultType=yp;function Up(a){this.xy=a}Up.prototype.cancel=function(){for(var a=this.xy,b=a.length;b--;)a[b].cancel();a.length=0};Up.prototype.cancel=Up.prototype.cancel;function Qp(a){Qp.g.constructor.call(this,Qp,a);ko(Qp)}u(Qp,po);t("H.service.extension.platformData.Service",Qp);Qp.prototype.Ca=function(){return{subDomain:"s.fleet.ls",path:"1"}};Qp.CONFIG_KEY="platformData";Qp.prototype.request=function(a,b,c,d,e){return this.K(a,b,c,d,e)};Qp.prototype.request=Qp.prototype.request;\nQp.prototype.K=function(a,b,c,d,e){var f="text/plain";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.i().clone().v(a+"."+b).B(c);b===Vp.JSON&&(f="application/json");return this.s(a,d,e,f)};var Rp="tiles";\nQp.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:Rp,FILE:"file",INDEX:"index"};var Sp="json",Vp={TXT:"txt",JSON:Sp,HTML:"html",BIN:"bin"};Qp.EntryPointType=Vp;\nQp.prototype.Od=function(a,b){var c=b&&b.resultType;a=new Pp(this,a,b);return 1==c||2===c?new hg(a):new Dk(a)};Qp.prototype.createTileLayer=Qp.prototype.Od;Qp.prototype.Bg=function(a,b,c,d){var e=[],f,g=b.layer_id||b.layer_ids;a=this.request(a,Sp,b,function(h){f=new pp(h.geometries,c,d,function(k){return new Kp([],k.columnNames,k)},function(k,l){var n=k.Td;k.Ob?k.Ob.push(l):k.Ob=[l];return n.call(k,k.Ob.length-1)},{At:g});e.push(f)},function(h){d(new x.Error(h))});e.push(a);return new Up(e)};\nfunction Wp(a,b,c){if(!fb(a))throw new D(c,0,"has invalid type");if(!fb(b))throw new D(c,1,"has invalid type");if(a.length!==b.length||!a.length)throw new D(c,1,"specify one key attribute for each given layer id in the same order");}\nQp.prototype.re=function(a,b,c,d,e,f){function g(l,n){n&&h--;d(l,!h)}var h,k=[];Wp(a,b,this.re);op(this.re,3,d,e);C(c,J,this.re,2);c={bbox:c.fa+","+c.W+";"+c.ga+","+c.ca};f&&Pa(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(this.Bg("search/bbox",c,g,e));return new Up(k)};Qp.prototype.searchByBoundingBox=Qp.prototype.re;\nQp.prototype.Xc=function(a,b,c,d,e,f,g){Wp(a,b,this.Xc);C(c,fd,this.Xc,2,"has invalid type");if(!jb(d))throw new D(this.Xc,3,"has invalid type");op(this.Xc,4,e,f);a={layer_ids:a.join(","),key_attributes:b.join(","),proximity:c.lat+","+c.lng+","+d};g&&Pa(a,g);return this.Bg("search/proximity",a,e,f)};Qp.prototype.searchByProximity=Qp.prototype.Xc;\nQp.prototype.Wc=function(a,b,c,d,e,f,g){var h="";Wp(a,b,this.Wc);if(!gb(c)&&!C(c,M))throw new D(this.Wc,1,"has invalid type");if(!jb(d))throw new D(this.Wc,2,"has invalid type");op(this.Wc,4,e,f);a={layer_ids:a.join(","),key_attributes:b.join(","),radius:d};if(gb(c))a.route_id=c;else{d=c.S;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+","+d[c+1],c<b-3&&(h+=";");a.corridor=h}g&&Pa(a,g);return this.Bg("search/corridor",a,e,f)};Qp.prototype.searchByCorridor=Qp.prototype.Wc;\nX.prototype.oA=function(a){return this.Ta(Qp,a)};X.prototype.getPlatformDataService=X.prototype.oA;function Xp(a){Zo.g.constructor.call(this,Xp,a);ko(Xp)}u(Xp,po);t("H.service.extension.customRoute.Service",Xp);Xp.prototype.Ca=function(){return{subDomain:"s.fleet.ls",path:"2"}};Xp.CONFIG_KEY="customRoute";Xp.prototype.qd=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(". "):a)};Xp.prototype.Xg=function(a,b,c){op(this.Xg,1,b,c);a=this.i().clone().v("calculateroute.json").B(a);return this.s(a,b,c)};Xp.prototype.calculateRoute=Xp.prototype.Xg;\nX.prototype.Ez=function(a){return this.Ta(Xp,a)};X.prototype.getCustomRoutingService=X.prototype.Ez;function Yp(a){Yp.g.constructor.call(this,Yp,a);ko(Yp)}u(Yp,po);t("H.service.extension.geofencing.Service",Yp);Yp.prototype.Ca=function(){return{subDomain:"fleet.ls",path:"2"}};Yp.CONFIG_KEY="geofencing";Yp.prototype.request=function(a,b,c,d){return this.K(a,b,c,d)};Yp.prototype.request=Yp.prototype.request;Yp.prototype.qd=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(". "):a.message||a.response_code)};\nYp.prototype.K=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Za(c))throw new TypeError("onResult must be a function");if(!Za(d))throw new TypeError("onError must be a function");a=this.i().clone().v(a+".json").B(b);return this.s(a,c,d)};Yp.EntryPoint={SEARCH_PROXIMITY:"search/proximity"};X.prototype.Qz=function(a){return this.Ta(Yp,a)};X.prototype.getGeofencingService=X.prototype.Qz;function Zp(a){var b=$p;if(!a||!gb(a.layerId)||ab(a.rowFilter)&&!Za(a.rowFilter)||ab(a.rowFilterContext)&&!ya(a.rowFilterContext))throw new D(b,1,ab("invalid layer config")?"invalid layer config":a);}function aq(a){return gb(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function bq(a){for(var b=a&&a.length,c=2<=b&&"WKT"===a[--b]&&"GEOMETRY_ID"===a[--b];c&&b--;)c=aq(a[b]);return c}\nfunction cq(a,b){var c="",d=[];if(b){var e=a.geometries;if(e&&e.length){var f=Object.keys(e[0].attributes);c=c+("Meta:\\t"+b+"\\n")+f.join("\\t");c+="\\tWKT\\n";for(a=0;a<e.length;a++){var g=e[a].attributes;var h=e[a].geometry;for(b=0;b<f.length;b++)d.push(g[f[b]]);c+=d.join("\\t");c+="\\t"+h+"\\n";d=[]}}}else{h={};d=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],h[b.layerId]||(h[b.layerId]=[]),h[b.layerId].push(b);for(f in h)d.push({layerId:f,geometries:h[f]});for(a=0;a<d.length;a++)c+=\ncq(d[a],d[a].layerId)}return c};t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"});t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"});function dq(){if(eq)throw new wb(dq);}t("H.service.extension.customLocation.Table",dq);var eq=!0;function fq(a,b){var c;eq=!1;var d=new dq;eq=!0;d.Ym=Xa(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=Ta();for(c=a.length;c--;)e[a[c]]=c;d.So=e;d.Fc=a.length;if(b){if(b.length%a.length)throw new D(fq,1,"Invalid number of cells");}else b=[];d.tb=b;return d}dq.prototype.zh=function(){return this.Ym};dq.prototype.getMeta=dq.prototype.zh;dq.prototype.Ch=function(){return this.tb.length/this.Fc};\ndq.prototype.getRowCount=dq.prototype.Ch;dq.prototype.Td=function(a){return a<this.tb.length/this.Fc?new gq(this,a):B};dq.prototype.getRow=dq.prototype.Td;dq.prototype.zA=function(){var a=this.tb.length/this.Fc,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new gq(this,b);return c};dq.prototype.getRows=dq.prototype.zA;dq.prototype.zo=function(a){var b=this.Fc,c=this.tb,d=c.length/this.Fc;if(!a||a.length%b)throw new D(this.zo,0,"Invalid number of cells");this.tb=c.concat(a);return d};\ndq.prototype.addCells=dq.prototype.zo;dq.prototype.jy=function(){for(var a=this.Fc,b=this.tb,c=this.tb.length/this.Fc;a--;)b.push(z);return this.Td(c)};dq.prototype.addRow=dq.prototype.jy;dq.prototype.ab=function(){return this.Ym.columnNames};dq.prototype.getColumnNames=dq.prototype.ab;dq.prototype.Fj=function(a){return this.So[a]===B?B:new hq(this,a)};dq.prototype.getColumn=dq.prototype.Fj;dq.prototype.ua=function(a,b){return this.tb[a*this.Fc+this.So[b]]};dq.prototype.getCell=dq.prototype.ua;\ndq.prototype.te=function(a,b,c){b=this.So[b];if(a>=this.tb.length/this.Fc)throw new D(this.te,0,"Row index out of bounds");if(b===B)throw new D(this.te,0,"Column unknown");this.tb[a*this.Fc+b]=c};dq.prototype.setCell=dq.prototype.te;\ndq.prototype.concat=function(a){var b=arguments.length,c,d=""+this.ab(),e=this.tb?this.tb.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof dq))throw new D(this.concat,c);if(""+f.ab()!==d)throw new D(this.concat,c,"Incompatible columns!");f.tb&&(e=e.concat(f.tb))}return fq(this.Ym,e)};dq.prototype.concat=dq.prototype.concat;var iq=/(\\n|\\t|\\r|")/;\ndq.prototype.os=function(a,b){var c,d=this.Fc,e=this.ab(),f=[],g=[],h=this.tb,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))"WKT"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.os,1,"No columns filtered");jq(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push("\\n"),e=b[c],jq(this,g,h,e,d,f,a,k)}else for(l=this.Ch(),e=0;e<l;e++)g.push("\\n"),jq(this,g,h,e,d,f,a,k);return g.join("")};\nfunction jq(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push("\\t");var l=c[d*e+f[k]];if(k!==h){if(l!==z){l=String(l);if(iq.test(l))throw new D(a.os,0,\'Invalid character (\\\\n, \\\\r, \\\\t, or ") in row \'+d+" column "+a.Ym.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function hq(a,b){this.$b=a;this.Nl=b}dq.Column=hq;hq.prototype.ua=function(a){return this.$b.ua(a,this.Nl)};hq.prototype.getCell=hq.prototype.ua;hq.prototype.te=function(a,b){this.$b.te(a,this.Nl,b)};hq.prototype.setCell=hq.prototype.te;\nfunction gq(a,b){this.$b=a;this.Kk=b}dq.Row=gq;gq.prototype.ab=function(){return this.$b.ab()};gq.prototype.getColumnNames=gq.prototype.ab;gq.prototype.ua=function(a){return this.$b.ua(this.Kk,a)};gq.prototype.getCell=gq.prototype.ua;gq.prototype.te=function(a,b){this.$b.te(this.Kk,a,b)};gq.prototype.setCell=gq.prototype.te;gq.prototype.Qf=function(){return this.$b};gq.prototype.getTable=gq.prototype.Qf;function kq(a){if(a===B)a="\\t";else if(!/^[^"\\r\\n]$/.test(a))throw new D(kq,0);this.Yx=String(a).charCodeAt(0);this.wd=A(this.wd,this);this.o=lq}var lq=0;m=kq.prototype;m.getState=function(){return this.o};function mq(a,b,c){var d=a.o;if(d!==b)throw 1===d&&(a.o=lq),new wb(c,"Requires state: "+["READY","PARSE","PAUSE"][b]+" but found "+["READY","PARSE","PAUSE"][d]);}m.abort=function(){mq(this,2,kq.prototype.abort);this.o=lq};\nm.wd=function(a){this.o=lq;throw new D(kq.prototype.parse,0,"Malformed DSV at row "+this.cd.Gr+" column "+this.cd.fj+": "+a);};function nq(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.o=lq;return c}m.parse=function(a,b,c){mq(this,lq,kq.prototype.parse);a=a.trim();this.cd=new oq(a,this.Yx,this.wd);this.VB=b;this.Hv=c||ye;this.o=2;this.resume()};m.Hv=ye;\nm.resume=function(){var a=this.cd,b=[];mq(this,2,kq.prototype.resume);this.o=1;do{if(!a.cq){this.o=lq;break}if(e>a.fj){if(void 0!==c&&c!==e){this.cd.wd("The number of columns must be the same for all rows");return}var c=e}var d=a.Gr;var e=a.fj;var f=a.Ol;var g=this.Hv(d,e,a);if(a.Ol>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(z,b);b.length=0}pq(a);this.VB(d,e,g)&&(this.o=a.cq?2:lq)}while(1===this.o);2!=this.o&&void 0!==c&&0<e&&c!==e&&this.cd.wd("The number of columns must be the same for all rows")};\nfunction oq(a,b,c){this.cd=new Gh(a);this.Is=b;this.cq=!0;this.Ol=this.Gr=this.fj=0;pq(this);this.wd=c;this.Cc=[];this.Xf=!1}m=oq.prototype;m.Ol=0;function pq(a){var b=a.cd.eb();a.Yt=!1;(a.dB=34===b)&&a.cd.next()}function qq(a,b){var c=a.cd;a.Yt=!0;switch(b){case a.Is:a.fj++;break;case 13:c.next(),10!==c.eb()&&a.wd("CR without LF");case 10:a.fj=0;a.Gr++;break;case -1:a.cq=!1;break;default:a.wd("End of field expected")}c.next();return-1}\nm.eb=function(){if(this.Yt)var a=-1;else{var b=this.cd;a=b.eb();if(this.dB)switch(a){case 34:b.next();a=b.eb();34!==a&&(a=qq(this,a));break;case -1:this.wd("Closing quotation mark expected")}else switch(a){case 34:this.wd("Unexpected quotation mark");case this.Is:case 13:case 10:case -1:a=qq(this,a)}}return a};m.yi=function(){this.Xf=!0;this.Cc=[]};m.mh=function(){var a=this.Cc.slice();this.Xf=!1;this.Cc=[];return a};\nm.next=function(){var a=this.eb();-1!==a&&this.cd.next();this.Xf&&this.Cc.push(a);this.Ol++;return a};function rq(a,b,c,d){d=d||{};if(!b)throw new D(rq,1,"has to be a function");if(!c)throw new D(rq,2,"has to be a function");this.mn=b;this.dn=c;this.bh=[];this.Mc={};this.xq=[];this.lh={};this.fs={};this.ls={};this.lx={};this.rj=d.duration||100;this.Gm=A(this.Gm,this);a=a.split("Meta:\\t").slice(1);for(b=0;b<a.length;b++){d=a[b].split("\\n");c=d[0].split("\\t")[0];d=d.slice(1).join("\\n");this.lh[c]=new kq;this.Mc[c]=nq(this.lh[c],d);var e={layerId:c,columnNames:this.Mc[c]};this.xq.push(c);this.lx[c]=\nfq(e);this.fs[c]=Gj();sq(this,d,c);this.Gm(c)}}function sq(a,b,c){var d=[],e=a.Mc[c].length-1,f=a.lx[c];try{a.lh[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.bh.push(f.Td(f.zo(d))),Gj()-a.fs[c]>a.rj&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return nh(k)})}catch(g){a.dn(g)}}rq.prototype.cancel=function(){for(var a in this.ls)x.clearTimeout(this.ls[a])};rq.prototype.cancel=rq.prototype.cancel;\nrq.prototype.Gm=function(a){var b=this,c,d;this.ls[a]=x.setTimeout(function(){if(2===b.lh[a].getState())b.fs[a]=Gj(),b.mn(b.bh,!1),b.bh=[],b.lh[a].resume(),b.Gm(a);else{c=!0;for(d=0;d<b.xq.length;d++)if(b.lh[b.xq[d]].getState()!==lq){c=!1;break}c&&(0<b.bh.length&&b.mn(b.bh,!0),b.bh=[])}},0)};function $p(a,b,c){var d=this,e=b&&b.rowFilter,f;$p.g.constructor.call(this,c);C(a,tq,$p,0);var g=c.resultType;Zp(b);if(e){var h=Na(b);h.rowFilter=e.toString()}else h=b;(new Th).registerProcessor("cle","H.service.extension.worker.processor");var k=b.layerId;a.request(uq,vq,{detail_level:"all",layer_id:k},function(l){l=l.layers;var n;for(n=0;n<l.length;n++)if(l[n].layerId===k){h.level=l[n].level;break}f=a.i().clone().v(wq+"."+vq).B({meta:1});(new Vh("cle",{message:[d.uid,0,{tileSize:d.tileSize,\nprojected:!0,onlyOutline:4===g,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.rq=!0;d.jb()},d.Gc)},function(l){d.Gc(l.message)})}u($p,vp);t("H.service.extension.customLocation.TileProvider",$p);$p.prototype.pu=function(a,b,c){return new Lp(a,b,c)};\n$p.prototype.s=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Sb().get(g);var k={cancel:ze},l=!0,n=this.resultType;g&&(4===n||8===n?g.Ih()||(d(oo.pop(this.tileSize),null),l=!1):(d(z),l=!1));if(l){var p=mo.setTimeout(function(){h=new Vh("cle",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():mo.clearTimeout(p)}}return k};$p.prototype.requestInternal=$p.prototype.s;\n$p.prototype.disposeInternal=function(){$p.g.disposeInternal.call(this);new Vh("cle",{message:[this.uid,3]})};function tq(a){tq.g.constructor.call(this,tq,a);ko(tq)}u(tq,po);t("H.service.extension.customLocation.Service",tq);tq.prototype.Ca=function(){return{subDomain:"fleet.ls",path:"2"}};tq.CONFIG_KEY="customLocation";tq.prototype.Od=function(a,b){var c=b&&b.resultType;a=new $p(this,a,b);return 1===c||2===c?new hg(a):new Dk(a)};tq.prototype.createTileLayer=tq.prototype.Od;\nfunction xq(a,b,c,d){a=a===yq?"changes":"file";var e=b[a];var f=gb(e),g=!f&&C(e,Blob);if(!f&&!g)throw new D(d,0,"Invalid "+a+" parameter");if(zq)e=g?e:He(e,"text/plain"),d=new x.FormData,d.append(a,e,e.name||a+".wkt"),c.method="POST",c.data=d,delete b[a];else if(g)throw new D(d,0,"Sending Blob data is not supported by the browser");}var zq=x.FormData&&!!x.FormData.prototype.append;tq.prototype.request=function(a,b,c,d,e){return this.K(a,b,c,d,e)};tq.prototype.request=tq.prototype.request;\ntq.prototype.K=function(a,b,c,d,e){var f="text/plain",g=a===Aq.LAYERS_UPLOAD||a===Aq.LAYERS_MODIFY||a===Aq.LAYERS_IMPORT,h=c,k={data:B,method:"GET",headers:this.Mc};if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);op(this.request,3,d,e);g&&(C(c,Object,this.request,2,"Invalid request parameters"),h=Na(c),xq(a,h,k,this.request));var l=this.i().clone().v(a+"."+b).B(h);b===Bq.JSON&&(f="application/json");a=new Ue(f,l.toString(),ge,k);a.then(function(n){var p=n.issues;p&&n.error_id&&\nn.response_code?e(Error(p[0].message)):d(n)},function(n){"error"===n.type||404===n.status?e(Error(n.statusText||"Unable to load data")):n.json().then(function(p){e(Error("["+p.issues[0].message+"] "+l+" request failed"))},function(){e(Error("["+n.statusText+"] "+l+" request failed"))})});return a};\nvar uq="layers/list",yq="layers/modify",wq="tiled/tile",Aq={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:uq,LAYERS_MODIFY:yq,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:wq};tq.EntryPoint=Aq;var vq="json",Bq={TXT:"txt",JSON:vq};tq.EntryPointType=Bq;\ntq.prototype.Tb=function(a,b,c){var d=this;return this.request("search/all","txt",{filter:\'WKT==""\',layer_id:a},function(e){var f=String(e).replace(/[\\r\\n]+$/g,"").split("\\t");d.request(uq,vq,{layer_id:a,detail_level:"all"},function(g){g=g.layers[0];g.columnNames=f;b(fq(g))},c)},c)};tq.prototype.getLayer=tq.prototype.Tb;\ntq.prototype.zu=function(a,b,c,d){function e(){return++g<f?h.request("layers/access/grant",vq,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(",")},e,d):h.Tb(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};tq.prototype.grantAccess=tq.prototype.zu;tq.prototype.Dt=function(a,b,c){return this.request("layers/delete",vq,{layer_ids:a},b,c)};tq.prototype.deleteLayer=tq.prototype.Dt;\ntq.prototype.md=function(a,b,c){function d(){setTimeout(function(){k.Tb(g,function(q){setTimeout(e.bind(null,q),n)},function(){64E3>l?(l+=n,d()):c(x.Error("Timeout"))})},n);n*=2}function e(q){var r=JSON.stringify(q.ab()),v=a.grants;if(r!==JSON.stringify(h)){var w="Results into different column names on the backend: "+r;setTimeout(function(){k.Dt(g,function(){c(x.Error(w))},function(y){c(x.Error(w+". "+y.message))})},n)}else v&&v.length?k.zu(g,v,b,c):b(q)}var f,g,h,k=this,l=0,n=1E3;var p=!a||!aq(g=\na.layerId)&&(f="layerId")||!bq(h=a.columnNames)&&(f="columnNames")?0:Za(b)?Za(c)?-1:2:1;if(0<=p)throw new D(k.md,p,f||arguments[p]);return k.Tb(g,function(){c(x.Error("Layer exists already"))},function(){var q={layer_id:g,file:h.join("\\t")},r=a.level,v=a.storage;r!==B&&(q.level=r);v!==B&&(q.storage=v);k.request("layers/upload",vq,q,d,c)})};tq.prototype.createLayer=tq.prototype.md;\ntq.prototype.Bg=function(a,b,c,d){var e=[],f;a=this.request(a,vq,b,function(g){g.geometries.length?(g=cq(g,b.layer_id),f=new rq(g,c,d),e.push(f)):c(Ae,!0)},d);e.push(a);return new Up(e)};tq.prototype.Xc=function(a,b,c,d,e,f){if(!fb(a))throw new D(this.Xc,0,"has invalid type");C(b,fd,this.Xc,1,"has invalid type");if(!jb(c))throw new D(this.Xc,2,"has invalid type");op(this.Xc,3,d,e);a={layer_ids:a.join(","),proximity:b.lat+","+b.lng+","+c};f&&Pa(a,f);return this.Bg("search/proximity",a,d,e)};\ntq.prototype.searchByProximity=tq.prototype.Xc;tq.prototype.Wc=function(a,b,c,d,e,f){var g="";if(!fb(a))throw new D(this.Wc,0,"has invalid type");if(!gb(b)&&!C(b,M))throw new D(this.Wc,1,"has invalid type");if(!jb(c))throw new D(this.Wc,2,"has invalid type");op(this.Wc,3,d,e);a={layer_ids:a.join(","),radius:c};if(gb(b))a.route_id=b;else{var h=b.S;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+","+h[b+1],b<c-3&&(g+=",");a.corridor=g}f&&Pa(a,f);return this.Bg("search/corridor",a,d,e)};\ntq.prototype.searchByCorridor=tq.prototype.Wc;tq.prototype.re=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!fb(a))throw new D(this.re,0,"has invalid type");C(b,J,this.re,1,"has invalid type");op(this.re,2,c,d);b={bbox:b.fa+","+b.W+";"+b.ga+","+b.ca};e&&Pa(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(this.Bg("search/bbox",b,f,d));return new Up(g)};tq.prototype.searchByBoundingBox=tq.prototype.re;\ntq.prototype.Lr=function(a,b,c,d){var e,f=[];if(!gb(a))throw new D(this.Lr,0,"has invalid type");op(this.Lr,1,b,c);var g={layer_id:a};d&&Pa(g,d);d=this.request("search/all",vq,g,function(h){h.geometries.length?(h=cq(h,a),e=new rq(h,b,c),f.push(e)):b(Ae,!0)},c);f.push(d);return new Up(f)};tq.prototype.searchAll=tq.prototype.Lr;var Cq={"delete":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Dq(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(P){v++;e(P,this,v===q)}var k="append"!==b,l,n={},p=Ta(),q=0,r=[],v=0;if(!fb(c))throw new D(f,0,c);op(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,gq)){var y=w.Qf().zh().layerId;var G=w.ua("GEOMETRY_ID");if(k){if(G===z||""===String(G))var I=\'GEOMETRY_ID must not be null or ""\';n[G=y+"_"+G]&&(I="same GEOMETRY_ID for multiple rows");n[G]=w}else G!==z&&""!==String(G)&&(I=\'GEOMETRY_ID must be null or ""\')}else I="Invalid type";if(I)throw new D(f,\n0,"- Invalid row at index "+l+", "+I);G=p[y];G||(G=p[y]=[],q++);G.push(w)}for(y in p){G=p[y];c=[];for(l=G.length;l--;)c.push(G[l].Kk);r.push(a.request(yq,vq,{layer_id:y,action:b,changes:G[0].Qf().os(Cq[b]||null,c)},A(g,G),A(h,G)))}return new Up(r)}tq.prototype.dt=function(a,b,c){return Dq(this,"append",a,b,c,this.dt)};tq.prototype.appendRows=tq.prototype.dt;tq.prototype.Fx=function(a,b,c){return Dq(this,"update",a,b,c,this.Fx)};tq.prototype.updateRows=tq.prototype.Fx;\ntq.prototype.Et=function(a,b,c){return Dq(this,"delete",a,b,c,this.Et)};tq.prototype.deleteRows=tq.prototype.Et;X.prototype.Dz=function(a){return this.Ta(tq,a)};X.prototype.getCustomLocationService=X.prototype.Dz;function vo(a){a=void 0===a?{}:a;vo.g.constructor.call(this,vo,a);this.Ci={Rn:a.resource||"base",Dn:a.projection||"mc",format:a.format||"png8"};this.Fn=a.queryParams||{}}u(vo,po);t("H.service.rasterTile.Service",vo);m=vo.prototype;m.J=function(){return this.Fn.style||"explore.day"};m.Rf=function(a,b,c){return this.i().clone().v(this.Ci.Rn+"/"+(this.Ci.Dn+"/")+(c+"/"+a+"/"+b+"/")+this.Ci.format).B(this.Fn)};m.Ca=function(){return{subDomain:"maps",path:"v3"}};\nm.U=function(){this.ec||this.Jf();return this.ec};m.Jf=function(){this.ec=new lp;this.s(this.i().clone().v("copyright"),A(this.pl,this),ze)};m.pl=function(a){var b=a.copyrights;a=a.resources;var c={},d=this.Ci.Rn+"."+this.J();c[d]=[];a[this.Ci.Rn].styles[this.J()].forEach(function(e){b[e].forEach(function(f){var g=[];f.boundingBoxes.forEach(function(h){g.push([h.north,h.west,h.south,h.east])});c[d].push({boxes:g,label:f.label,alt:f.alt,minLevel:f.minLevel,maxLevel:f.maxLevel})})});mp(this.ec,c)};\nm.Kj=function(a,b){return this.s(this.i().clone().v("info"),a,b)};vo.prototype.getInfo=vo.prototype.Kj;vo.prototype.Nj=function(a,b){return this.s(this.i().clone().v("politicalViews"),a,b)};vo.prototype.getPoliticalViews=vo.prototype.Nj;vo.prototype.Oz=function(a,b){return this.s(this.i().clone().v("features"),a,b)};vo.prototype.getFeatures=vo.prototype.Oz;vo.prototype.Ip=function(a,b){return this.s(this.i().clone().v("languages"),a,b)};vo.prototype.getLanguages=vo.prototype.Ip;vo.CONFIG_KEY="rasterTile";\nX.prototype.Qp=function(a){return this.Ta(vo,a)};X.prototype.getRasterTileService=X.prototype.Qp;function Eq(a){Eq.g.constructor.call(this,Eq,a);ko(Eq,"Use HERE Routing API v8 instead.")}u(Eq,po);t("H.service.RoutingService",Eq);Eq.prototype.Ca=function(){return{subDomain:"route.ls",path:"routing/7.2"}};Eq.prototype.qd=function(a){return Error(a.details)};Eq.CONFIG_KEY="routing";Eq.prototype.Xg=function(a,b,c){a=this.i().clone().v("calculateroute.json").B(a);return this.s(a,b,c)};Eq.prototype.calculateRoute=Eq.prototype.Xg;\nEq.prototype.Mo=function(a,b,c){a=this.i().clone().Ha("isoline").v("calculateisoline.json").B(a);return this.s(a,b,c)};Eq.prototype.calculateIsoline=Eq.prototype.Mo;function Fq(a){Fq.g.constructor.call(this,Fq,a)}u(Fq,po);t("H.service.RoutingService8",Fq);Fq.CONFIG_KEY="routing_v8";Fq.prototype.Ca=function(){return{subDomain:"router",path:"v8/routes"}};Fq.prototype.qd=function(a){return Error(401===(a&&void 0===a.status?401:a.status)?a.error_description:a.title,{cause:a})};Fq.prototype.Xg=function(a,b,c){a=this.i().clone().B(a);return this.s(a,b,c)};Fq.prototype.calculateRoute=Fq.prototype.Xg;\nFq.prototype.Mo=function(a,b,c){a=this.i().clone().Ha("isoline").Fg("v8/isolines").B(a);return this.s(a,b,c)};Fq.prototype.calculateIsoline=Fq.prototype.Mo;X.prototype.ru=function(a,b){b=+b||7;if(7===b)b=Eq;else if(8===b)b=Fq;else throw new D(this.ru,1,"allowed values are 7 and 8");return this.Ta(b,a)};X.prototype.getRoutingService=X.prototype.ru;function Gq(a,b,c){var d=this,e=c||{},f=+e.min,g=+e.max;e.tileSize=e.tileSize||512;e.min=f?ac(f,1,17):1;e.min+=Yi(e.tileSize,1);e.max=g?ac(g,1,17):17;Gq.g.constructor.call(this,e);C(a,Hq,Gq,0);C(b,cf,Gq,1);this.$=a;b.Yb&&b.Yb("OMV");this.Xa(b,!0);this.xn=!1;c&&(c.politicalView&&(this.yn=c.politicalView),Iq(this,c.lg,c.lg2),this.xn=!!c.pois);this.xw=function(){d.Hl=io(d);d.reload(!1)};a.addEventListener("versionupdate",this.xw);this.Hl=io(this);Gq.prototype.Xo=function(){var h=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.i().hf);\nreturn h?h[1]:B+""}()}u(Gq,R);t("H.service.omv.Provider",Gq);Gq.prototype.Vc=xe;Gq.prototype.providesOMV=Gq.prototype.Vc;Gq.prototype.cc=function(a){return this.Hl.test(a)};Gq.prototype.cacheFilter=Gq.prototype.cc;Gq.prototype.Ud=function(a,b,c){return this.$.Rf(a,b,c).toString()};Gq.prototype.getTileKey=Gq.prototype.Ud;Gq.prototype.Sb=function(){return this.PB};Gq.prototype.getCache=Gq.prototype.Sb;Gq.prototype.qA=function(){return this.yn};Gq.prototype.getPoliticalView=Gq.prototype.qA;\nGq.prototype.YC=function(a){var b=this.yn;this.yn=a;this.dispatchEvent(new Zc("politicalviewchange",this.yn,b))};Gq.prototype.setPoliticalView=Gq.prototype.YC;Gq.prototype.MAX_STORE_TIME=2592E6;Gq.prototype.Vi=function(){return Mm()};Gq.prototype.sd=function(){return Mm()?Lm():Gq.g.sd.call(this)};Gq.prototype.s=function(a,b,c,d,e){return this.$.Oa(a,b,c,d,e)};Gq.prototype.requestInternal=Gq.prototype.s;Gq.prototype.Cb=function(a){a.Yb&&a.Yb("OMV");this.Xa(a)};Gq.prototype.setStyle=Gq.prototype.Cb;\nGq.prototype.J=function(){return Gq.g.mb.apply(this)};Gq.prototype.getStyle=Gq.prototype.J;Gq.prototype.mb=function(){var a=Gq.g.mb.apply(this),b=a.getState()===df.READY,c=a.Rd();b&&c&&c.global&&(this.pq&&(this.mw&&(c.global.ux_language=this.mw),this.Wt&&(c.global.ux_language_fallback=this.Wt)),this.xn&&c.global.poi&&c.global.poi["default"]&&(c.global.poi["default"].visible=this.xn),this.pq||this.xn)&&(a=new Bf(c,a.Ic()));return a};Gq.prototype.getStyleInternal=Gq.prototype.mb;\nfunction Iq(a,b,c){var d=gb(b),e=gb(c);d&&(a.mw=b);e&&(a.Wt=c);if(d||e)a.Zj=[],d=/^([a-zA-Z]{2})(-|$)/,(e=d.exec(b))&&("zh"===e[1]?a.Zj.push(b):a.Zj.push(e[1])),(e=d.exec(c))&&("zh"===e[1]?a.Zj.push(c):a.Zj.push(e[1])),a.pq=!0}Gq.prototype.pq=!1;var Jq=["en"];Gq.prototype.Ip=function(){return this.Zj||Jq};Gq.prototype.getLanguages=Gq.prototype.Ip;Gq.prototype.disposeInternal=function(){Gq.g.disposeInternal.call(this);this.$.removeEventListener("versionupdate",this.xw)};Gq.prototype.PB=new Ri(256);\nGq.prototype.U=function(a,b){return this.$.U().query(this.Xo,b,a)};Gq.prototype.getCopyrights=Gq.prototype.U;function Hq(a){Hq.g.constructor.call(this,Hq,a);var b=qo(this,a).mapVersion;this.Fn=a.queryParams||{};this.dk=ab(b)?b:Kq[this.i().toString()];ab(this.dk)||Lq(this)}u(Hq,po);t("H.service.omv.Service",Hq);Hq.prototype.Ca=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}};Hq.CONFIG_KEY="omv";var Kq={};mb(Kq);Hq.prototype.eA=function(){return this.dk};Hq.prototype.getMapVersion=Hq.prototype.eA;\nfunction Lq(a){a.s(a.i().clone().v("../../info"),function(b){b=b.mapVersion;var c=a.i().toString();a.dk=b;b!==Kq[c]&&(Kq[c]=b,a.dispatchEvent("versionupdate"))},function(){})}Hq.prototype.md=function(a,b,c){b=b||{};var d={min:0,max:22};ya(c)&&jo(d,c);return new Dk(new Gq(this,a,b),d)};Hq.prototype.createLayer=Hq.prototype.md;Hq.prototype.Oa=function(a,b,c,d,e){return this.s(this.Rf(a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,"arraybuffer")};\nHq.prototype.Rf=function(a,b,c){a=this.i().clone().v(c+"/"+a+"/"+b+"/omv");ab(this.dk)&&a.B({mv:this.dk}).B(this.Fn);return a};Hq.prototype.rm=function(a){return ln()+"/"+a};Hq.prototype.Nj=function(a,b){if(!Za(a))throw new D(this.Nj,0,\'"onResult" must be a function\');if(!Za(b))throw new D(this.Nj,1,\'"onError" must be a function\');return this.s(this.i().clone().Fg("v2/vectortiles/pviews"),a,b)};Hq.prototype.getPoliticalViews=Hq.prototype.Nj;X.prototype.Lj=function(a){return this.Ta(Hq,a)};\nX.prototype.getOMVService=X.prototype.Lj;Hq.prototype.Jf=function(){this.ec=new lp;this.s(this.i().clone().v("../../copyrights"),A(this.pl,this),ze)};Hq.prototype.pl=function(a){mp(this.ec,a);this.dispatchEvent("copyrightupdate")};Hq.prototype.U=function(){this.ec||this.Jf();return this.ec};Hq.prototype.getCopyrights=Hq.prototype.U;function Mq(a){this.ns=!!a.toBypassToken;if(!this.ns&&!a.token)throw new D(Mq,0,\'"token" must be specified\');ko(Mq,"Use HERE IML service instead.");Mq.g.constructor.call(this,Mq,a);this.xx=a.token;this.st={};this.Vl={}}u(Mq,po);t("H.service.xyz.Service",Mq);Mq.prototype.Ca=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}};Mq.prototype.qd=function(a){return Error(a.errorMessage||a.message)};\nMq.prototype.Np=function(a,b,c){db(a,"String",this.Np,0,\'"projectId" must be a string\');Nq(this.Np,1,b,c);a=Oq(this.i().clone().Fg("project-api/projects/"+a));return this.s(a,b,c)};Mq.prototype.getProject=Mq.prototype.Np;Mq.prototype.su=function(a,b,c){Nq(this.su,0,a,b);c=Pq(this,this.i().clone().B(c||{}));return this.s(c,a,b)};Mq.prototype.getSpaces=Mq.prototype.su;\nMq.prototype.qm=function(a,b,c){db(a,"String",this.qm,0,\'"spaceId" must be a string\');Nq(this.qm,1,b,c);a=Pq(this,this.i().clone().v(a));return this.s(a,b,c)};Mq.prototype.getSpace=Mq.prototype.qm;Mq.prototype.Dh=function(a,b,c){db(a,"String",this.Dh,0,\'"spaceId" must be a string\');Nq(this.Dh,1,b,c);a=Pq(this,this.i().clone().v(a+"/statistics"));return this.s(a,b,c)};Mq.prototype.getStatistics=Mq.prototype.Dh;\nMq.prototype.lm=function(a,b,c,d,e,f,g){a=Pq(this,this.i().clone().v(d+"/tile/web/"+c+"_"+a+"_"+b+".mvtf").B(Object.assign({clip:!0},g)));return this.s(a,function(h){return h.arrayBuffer().then(e)},f,"arraybuffer")};Mq.prototype.search=function(a,b,c,d){db(a,"String",this.search,0,\'"spaceId" must be a string\');Nq(this.search,1,b,c);a=Pq(this,this.i().clone().v(a+"/search").B(d||{}));return this.s(a,b,c)};Mq.prototype.search=Mq.prototype.search;\nMq.prototype.Te=function(a,b,c,d){db(a,"String",this.Te,0,\'"spaceId" must be a string\');if(!ya(b))throw new D(this.Te,1,\'"params" must be an object\');Nq(this.Te,2,c,d);a=Pq(this,this.i().clone().v(a+"/features").B(b));return this.s(a,c,d)};Mq.prototype.getFeaturesById=Mq.prototype.Te;\nMq.prototype.wh=function(a,b,c,d){db(a,"String",this.wh,0,\'"spaceId" must be a string\');if(!ya(b))throw new D(this.Te,1,\'"params" must be an object\');Nq(this.wh,2,c,d);a=Pq(this,this.i().clone().v(a+"/bbox").B(b));return this.s(a,c,d)};Mq.prototype.getFeaturesByBoundingBox=Mq.prototype.wh;Mq.prototype.U=function(a){var b=this.st[a];if(b)return b;this.Vl[a]||this.Jf(a);return null};\nMq.prototype.mf=function(a,b,c,d,e){db(a,"String",this.mf,0,\'"spaceId" must be a string\');if(!ya(b))throw new D(this.mf,1,\'"geojsonObject" must be an object\');Nq(this.mf,2,c,d);if(e&&!ya(e))throw new D(this.mf,4,\'"opt_params" must be an object\');return Qq(this,a,c,d,"PUT",b,e)};Mq.prototype.putFeatures=Mq.prototype.mf;\nMq.prototype.kf=function(a,b,c,d,e){db(a,"String",this.kf,0,\'"spaceId" must be a string\');if(!ya(b))throw new D(this.kf,1,\'"featureCollection" must be an object\');Nq(this.kf,2,c,d);if(e&&!ya(e))throw new D(this.kf,4,\'"opt_params" must be an object\');return Qq(this,a,c,d,"POST",b,e)};Mq.prototype.postFeatures=Mq.prototype.kf;\nMq.prototype.Hf=function(a,b,c,d){db(a,"String",this.Hf,0,\'"spaceId" must be a string\');if(!ya(b))throw new D(this.Hf,1,\'"params" must be an object\');Nq(this.Hf,2,c,d);return Qq(this,a,c,d,"DELETE",B,b)};Mq.prototype.deleteFeatures=Mq.prototype.Hf;\nfunction Qq(a,b,c,d,e,f,g){var h=Object.assign(a.ns?{}:{authorization:"Bearer "+a.xx},{"Content-Type":"application/geo+json"},a.Mc);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=Oq(a.i().clone().v(b+"/features").B(g||{}));f=new Ue("application/json",b.toString(),ge,e);f.then(c,so(a,b,d));return f}Mq.prototype.Jf=function(a){var b=this;this.Vl[a]=Rq;this.qm(a,function(c){b.Vl[a]=Sq;b.st[a]=c.copyright;b.dispatchEvent("copyrightupdate")},function(c){b.Vl[a]=Tq;throw c;})};\nfunction Pq(a,b){return a.ns?b:Oq(b).B({access_token:a.xx})}function Oq(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.Tk(b)}Mq.CONFIG_KEY="xyz";var Rq=1,Sq=2,Tq=-1;function Nq(a,b,c,d){if(!Za(c))throw new D(a,b,\'"onResult" must be a function\');if(!Za(d))throw new D(a,b+1,\'"onError" must be a function\');}X.prototype.OA=function(a){return this.Ta(Mq,a)};X.prototype.getXYZService=X.prototype.OA;function Uq(a,b,c){var d;Uq.g.constructor.call(this,c?{min:c.min,max:c.max,engineType:c.engineType}:void 0);C(a,Mq,Uq,0);if(!gb(b))throw new D(Uq,1,\'"spaceId" must be a string\');this.$=a;this.Gg=b;this.Ok={};if(c&&(["limit","simplificationLevel","tags"].forEach(function(e){e in c&&(this.Ok[e]=c[e])},this),a=c.parameters))for(d in a)this.Ok[d]=a[d];this.Xa(this.Ep())}u(Uq,R);t("H.service.xyz.Provider",Uq);Uq.prototype.s=function(a,b,c,d,e){return this.$.lm(a,b,c,this.Gg,d,e,this.Ok)};\nUq.prototype.requestInternal=Uq.prototype.s;Uq.prototype.U=function(){return this.$.U(this.Gg)};Uq.prototype.getCopyrights=Uq.prototype.U;Uq.prototype.Vc=xe;Uq.prototype.providesOMV=Uq.prototype.Vc;Uq.prototype.J=function(){return this.mb()};Uq.prototype.getStyle=Uq.prototype.J;Uq.prototype.Cb=function(a){C(a,Bf)&&a.Yb("MVT");this.Xa(a)};Uq.prototype.setStyle=Uq.prototype.Cb;\nUq.prototype.Ep=function(){return this.vb===Rf.WEBGL?new Bf({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.Gg},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):\nnew H.map.render.harp.Style({styles:[{layer:this.Gg,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.Gg,when:["==",["geometry-type"],"Polygon"],technique:"polygon",color:"#E39E3C",renderOrder:201},{layer:this.Gg,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",width:"1px",renderOrder:202},{layer:this.Gg,when:["==",["geometry-type"],"LineString"],technique:"solid-line",\ncolor:"#000000",width:"2px",renderOrder:203}]})};X.prototype.Xl=function(a,b,c,d,e,f){function g(Qa,ic,jc){ic=Qa.rm(ic);ic=r?new Bf(ic):new H.map.render.harp.Style(ic);var La={engineType:l};p&&p.politicalView&&(La.politicalView=p.politicalView);c&&(La.lg=c);d&&(La.lg2=d);f&&(La.pois=f);var Bc;jc&&(Bc={dark:jc});return Qa.md(ic,La,Bc)}function h(Qa,ic,jc,La,Bc){return Qa.Od(ic,jc,v,La,w,1,Bc,n)}var k=this,l=Qf,n={crossOrigin:"anonymous"};if(ya(a)){var p=a;"crossOrigin"in p&&(n.crossOrigin=p.crossOrigin);a=p.tileSize;b=p.ppi;c=p.lg;d=p.lg2;e=p.style;\nf=p.pois;void 0!==p.engineType&&(l=p.engineType,n.engineType=l)}var q=l===Rf.HARP,r=l===Rf.WEBGL,v=a||512,w={};if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.Xl,1,b);}else w.ppi=+b;c&&(w.lg=c);d&&(w.lg2=d);e&&(w.style=e);f&&(w.pois=!!f);if(q&&!H.map.render.harp)throw new D(this.Xl,0,"HARP engine is not supported, module not found");a={};e=this.Kp();var y=this.Kp({type:"aerial"}),G=this.Sp(),I=G.vt(w.lg?{lg:w.lg,i18n:!0,engineType:l}:{engineType:l});jo(a,{raster:{normal:{xbase:h(e,"xbasetile",\n"normal.day","png8",!1),xbasenight:h(e,"xbasetile","normal.night","png8",!0),base:h(e,"basetile","normal.day","png8",!1),basenight:h(e,"basetile","normal.night","png8",!0),map:h(e,"maptile","normal.day","png8",!1),mapnight:h(e,"maptile","normal.night","png8",!0),trafficincidents:I,transit:h(e,"maptile","normal.day.transit","png8",!1),labels:h(e,"labeltile","normal.day","png",!1)},satellite:{xbase:h(y,"xbasetile","hybrid.day","jpg",!0),base:h(y,"basetile","hybrid.day","jpg",!0),map:h(y,"maptile","hybrid.day",\n"jpg",!0),labels:h(y,"labeltile","hybrid.day","png",!0)},terrain:{xbase:h(y,"xbasetile","terrain.day","jpg",!1),base:h(y,"basetile","terrain.day","jpg",!1),map:h(y,"maptile","terrain.day","jpg",!1),labels:h(y,"labeltile","terrain.day","png",!1)}}});if(q||r){jo(a,{vector:{normal:{traffic:G.ut(void 0,l),trafficincidents:I}}});y=this.Lj({queryParams:{content:"default,transit"}});e=this.Tp();G=this.Lj({queryParams:{content:"default,advanced_roads,advanced_pois,transit"}});var P=this.Lj({queryParams:{content:"default,hillshade,contours,transit"}});\nif(r)a.vector.normal.map=g(y,"omv/miami/normal.day.yaml"),a.vector.normal.truck=g(y,"omv/miami/truck.day.yaml");else if(q){a.vector.normal.map=g(y,"harp/oslo/normal.day.json");a.vector.normal.truck=g(y,"harp/oslo/normal.day.json");a.vector.normal.logistics=g(G,"harp/oslo/logistics.day.json");a.vector.normal.logisticsnight=g(G,"harp/oslo/logistics.night.json");I=g(P,"harp/oslo/topo.day.json");P=g(P,"harp/oslo/topo.night.json");var W=function(Qa){Qa=Qa.target;if(2===Qa.getState()){Qa.removeEventListener("change",\nW);var ic=Qa.getEnabledFeatures()||[];[{feature:"terrain",mode:"hillshade"},{feature:"contours",mode:"all"}].forEach(function(jc){var La=ic.findIndex(function(Bc){return Bc.feature===jc.feature});ic.splice(La,-1===La?0:1,jc)});Qa.setEnabledFeatures(ic)}};I.D.J().addEventListener("change",W);P.D.J().addEventListener("change",W);a.vector.normal.topo=I;a.vector.normal.toponight=P;var Ua={ppi:72<b?400:100,size:256<v?512:256,features:"pois:"+(!0===f||gb(f)&&/[^0]/.test(f)?"all":"disabled")};c&&(Ua.lang=\nc);d&&(Ua.lang2=d);p&&p.politicalView&&(Ua.pview=p.politicalView);b={dark:!0};I=function(Qa,ic,jc,La,Bc){var Lc=jo({},Ua);/^explore\\./.test(jc)||delete Lc.features;Qa=k.Qp({format:ic,resource:Qa,queryParams:jo({style:jc},Lc)});Bc=new uo(Qa,{engineType:l,style:Bc});return new Dk(Bc,La)};jo(a.raster.normal,{base:I("background","png8","explore.day"),basenight:I("background","png8","explore.night",b),map:I("base","png8","explore.day"),mapnight:I("base","png8","explore.night",b),labels:I("label","png",\n"explore.day")});jo(a.raster.satellite,{xbase:I("background","jpeg","satellite.day",b),base:I("background","jpeg","explore.satellite.day",b),map:I("base","jpeg","explore.satellite.day",b),labels:I("label","png","explore.satellite.day")});jo(a.vector.normal,{mapnight:g(y,"harp/oslo/normal.night.json",!0),lite:g(y,"harp/oslo/lite.day.json"),litenight:g(y,"harp/oslo/lite.night.json",!0),ism:g(y,"harp/oslo/road.network.day.json"),ismnight:g(y,"harp/oslo/road.network.night.json",!0),roadnetwork:g(y,"harp/oslo/road.network.day.json"),\nroadnetworknight:g(y,"harp/oslo/road.network.night.json",!0)});P={styles:[{technique:"raster",attr:{gamma:["step",["zoom"],.9,13,1],brightness:["step",["zoom"],.6,12,.7,13,.8,14,.8,17,.9]}}]};for(var ba=[],ub=0;6>ub;ub++){var Ca=new H.map.render.harp.Style(JSON.parse(JSON.stringify(P)));Ca=I("background","jpeg","satellite.day",b,Ca);ba.push(Ca)}a.hybrid={day:{raster:ba[0],vector:g(y,"harp/oslo/hybrid.day.json",!0),traffic:g(e,"harp/oslo/hybrid.day.json",!0)},night:{raster:ba[1],vector:g(y,"harp/oslo/hybrid.night.json",\n!0),traffic:g(e,"harp/oslo/hybrid.night.json",!0)},liteday:{raster:ba[2],vector:g(y,"harp/oslo/lite.hybrid.day.json",!0),traffic:g(e,"harp/oslo/lite.hybrid.day.json",!0)},litenight:{raster:ba[3],vector:g(y,"harp/oslo/lite.hybrid.night.json",!0),traffic:g(e,"harp/oslo/lite.hybrid.night.json",!0)},logistics:{raster:ba[4],vector:g(G,"harp/oslo/logistics.hybrid.day.json",!0),traffic:g(e,"harp/oslo/logistics.hybrid.day.json",!0)},logisticsnight:{raster:ba[5],vector:g(G,"harp/oslo/logistics.hybrid.night.json",\n!0),traffic:g(e,"harp/oslo/logistics.hybrid.night.json",!0)}}}y={traffic:{}};y.traffic.map=g(e,r?"traffic/vector.tile.yaml":"harp/oslo/normal.day.json");q&&(y.traffic.logistics=g(e,"harp/oslo/logistics.day.json"),y.traffic.logisticsnight=g(e,"harp/oslo/logistics.night.json"),y.traffic.mapnight=g(e,"harp/oslo/normal.night.json"),y.traffic.lite=g(e,"harp/oslo/lite.day.json"),y.traffic.litenight=g(e,"harp/oslo/lite.night.json"),y.traffic.topo=g(e,"harp/oslo/topo.day.json"),y.traffic.toponight=g(e,"harp/oslo/topo.night.json"));\njo(a.vector,y)}return a};X.prototype.createDefaultLayers=X.prototype.Xl;t("H.service.buildInfo",function(){return Zm("H-service","1.57.0","161a2e3",{region:"row"})});\n'
);
